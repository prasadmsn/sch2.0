var App, ko_extensions, ts, bh, __extends, AppUI, Ccx; (function (n) { function e() { var t = decodeURIComponent(document.location.search), n; return t.indexOf("?/Views/") == 0 && t.indexOf(":") > -1 ? (n = t.slice(t.indexOf(":") + 1), n.indexOf("(") > -1 ? new Function("return new " + n + ";")() : new Function("return " + n + ";")()) : t.indexOf("?Data=") == 0 ? (n = t.slice(6).split("&")[0], n.indexOf("{") == 0 || n.indexOf("[") > -1 ? new Function("return " + n + ";")() : n) : {} } function r(n) { var t = decodeURIComponent(document.location.search), i; if (t.indexOf("?/Views/") == 0) return i = t.slice(8).split("/").join("-").split(":")[0], n + "-" + i } function o() { $(document).on("keydown", function (n) { var t = $(n.target || n.srcElement); t.is('input,textarea,[contenteditable="true"]') || n.keyCode != 8 || n.preventDefault(); t.is('textarea,[contenteditable="true"]') || n.keyCode != 13 || n.preventDefault() }) } var u, i, f, t; n.Page = "Ccx-Page-Layout"; n.Dashboard = "Ccx-Page-Dashboard"; n.GetDataParameter = e; n.GetViewLocation = r; n.PreventAccidentalNavigation = o; u = function () { function u() { } return u.loadViews = function (n) { u.views.push(n) }, u.addTemplate = function (n) { var t = AppData.createId(); return ko_extensions.templateSources.InMemoryTemplateSource.RegisterTemplate(t, n), t }, u.loadPage = function (f, e, o, s) { AppData.DataAccessFactory.DataAccessType = CrmData.inCrm() ? CrmData.CrmDataAccess : LocalData.LocalDataAccess; i.Container = f; i.Engine = new ko_extensions.KnockoutViewEngine; n.PreventAccidentalNavigation(); $(function () { for (var f, h, c = [], i = 0; i < u.views.length; i++) f = document.createElement("DIV"), document.body.appendChild(f), h = $.Deferred(), c.push(h), $(f).load(u.views[i], h.resolve); $.when.apply(null, c).then(function () { $("script[data-template=view]").each(function (n, t) { var i = t; ko_extensions.templateSources.InMemoryTemplateSource.RegisterTemplate(i.id, i.innerHTML) }); window.setTimeout(function () { var u = r(e), i; if (u) i = n.GetDataParameter(), t.Current = new t(u, i), t.goHome(); else if (i = n.GetDataParameter(), i && i.view) { if (typeof i.context == "function") if (i.parameters) throw new Error("context constructor factory not implemented"); else i.context = new i.context(i); t.Current = new t(i.view, i.context); t.goHome() } else typeof s == "function" && (s = new s(i)), t.Current = new t(o, s), t.goHome() }, 500) }) }) }, u.load = function (n) { AppData.DataAccessFactory.DataAccessType = CrmData.inCrm() ? CrmData.CrmDataAccess : LocalData.LocalDataAccess; i.Engine = new ko_extensions.KnockoutViewEngine; $(function () { for (var i, r, f = [], t = 0; t < u.views.length; t++) i = document.createElement("DIV"), document.body.appendChild(i), r = $.Deferred(), f.push(r), $(i).load(u.views[t], r.resolve); $.when.apply(null, f).then(function () { $("script[data-template=view]").each(function (n, t) { var i = t; ko_extensions.templateSources.InMemoryTemplateSource.RegisterTemplate(i.id, i.innerHTML) }); window.setTimeout(function () { n(null) }, 500) }) }) }, u.views = [], u }(); n.Composition = u; i = function () { function n() { } return n.load = function (t, i) { if (t.ViewName.indexOf("/") > -1) { document.location.href = t.ViewName; return } var r = n.Engine.render(t); if (i) i.innerHTML = "", i.appendChild(r); else if (arguments.length == 1) n.Container.innerHTML = "", n.Container.appendChild(r); else throw new Error("App load error: element passed for view '" + t.ViewName + "' was not available."); }, n.location = function (n, t, i) { var r = ["/Views/"]; r.push(n.split("-").slice(1).join("/")); t && i ? (r.push(":"), r.push(i), r.push("("), r.push(JSON.stringify(t)), r.push(")")) : t && (r.push(":"), r.push(JSON.stringify(t))); document.location.href = "?" + encodeURIComponent(r.join("")) }, n.Loader = "ViewLoader", n }(); n.View = i; f = function () { function n(n) { this.view = n } return n.prototype.load = function (n) { this.view(n) }, n }(); n.ViewLoader = f; t = function () { function n(n, t) { this.defaultViewName = n; this.defaultViewContext = t; this.views = [] } return n.goBack = function () { n.Current.back() }, n.canGoBack = function () { return n.Current.views.length > 0 }, n.go = function (t, i, r) { if (typeof r == "undefined" && (r = !1), r) n.Current.load(t, i); else { var u = JSON.stringify(i), f = encodeURIComponent('{"view":"' + t + '","context":' + u + "}"); n.goTo("?Data=" + f) } }, n.goHome = function () { n.Current.home() }, n.goTo = function (n, t) { if (t) { var i = document.createElement("IFRAME"); i.frameBorder = "no"; i.className = "ccx-ui-frame"; i.src = n; t.innerHTML = ""; t.appendChild(i) } else document.location.href = n }, n.prototype.back = function () { this.rem(); this.reload() }, n.prototype.load = function (n, t) { var i = { ViewName: n, ViewContext: t }; this.add(i); this.reload() }, n.prototype.home = function () { this.views.length = 0; this.reload() }, n.prototype.reload = function () { if (this.views.length == 0) i.load({ ViewName: this.defaultViewName, ViewContext: this.defaultViewContext }); else { var n = this.views[this.views.length - 1]; n && i.load(n) } }, n.prototype.add = function (n) { this.views.push(n) }, n.prototype.rem = function () { return this.views.pop() }, n }(); n.Navigation = t })(App || (App = {})), function (n) { (function (n) { n[n.Single = 0] = "Single"; n[n.Double = 1] = "Double"; n[n.Triple = 2] = "Triple" })(n.ColumnLayout || (n.ColumnLayout = {})); var i = n.ColumnLayout, t = function () { function n(n, t) { this.title = n; this.width = t; this.columns = [] } return n.prototype.render = function () { var t, n; if (this.columns.length == 0) return this.addColumn(this.title, this.width); for (t = document.createElement("DIV"), n = 0; n < this.columns.length; n++) t.appendChild(this.columns[n]); return t }, n.prototype.destroy = function () { this.columns = [] }, n.prototype.addColumn = function (n, t) { var i = document.createElement("DIV"), r; return i.className = t == 1 ? "page-column double" : t == 2 ? "page-column triple" : "page-column", n && (r = document.createElement("H2"), r.innerHTML = n, i.appendChild(r)), this.columns.push(i), i }, n }(); n.PageLayout = t }(AppUI || (AppUI = {})); __extends = this.__extends || function (n, t) { function r() { this.constructor = n } for (var i in t) t.hasOwnProperty(i) && (n[i] = t[i]); r.prototype = t.prototype; n.prototype = new r }, function (n) { var f = function () { function f() { } return f.prototype.createValidationIcon = function (t, i, r) { var f = n.createActionIcon("Validation Error", n.icons.error, function () { }), u = $(f); return u.attr("title", i), u.addClass("validate"), u.hide(), t.subscribe(function (n) { r(n) ? (u.hide(), u.siblings(".validate:visible").length == 0 && u.parent().removeClass("invalid")) : (u.parent().addClass("invalid"), u.fadeIn()) }), f }, f.prototype.createDatePicker = function (n, t, i, r) { var u = $(n); u.datepicker({ dateFormat: "mm/dd/yy", showButtonPanel: !0 }); this.setObservableValue(i, function (n) { return u.datepicker("option", "minDate", n) }); this.setObservableValue(r, function (n) { return u.datepicker("option", "maxDate", n) }) }, f.prototype.createTimePicker = function (n, t, i, r, u) { var e = i ? "HHmm" : "h:mm tt", f = $(n); f.data("military", i); f.timepicker({ timeFormat: e }); this.setObservableValue(r, function (n) { return f.timepicker("option", "hourMin", n) }); this.setObservableValue(u, function (n) { return f.timepicker("option", "hourMax", n) }) }, f.prototype.createNumberTextbox = function (n, t, i, r, u, f) { var e = $(n); e.data("precision", f); e.w2field({ type: i ? "float" : "int", min: r || 0, max: u }) }, f.prototype.createNumberSlider = function (n, t, i, r, u) { this.createFlyout(n, function (n) { var f = t(); u ? $(n).slider({ range: !0, min: i, max: r, values: $.isArray(f) ? f : [Math.max(f, i), r], slide: function (n, i) { return t(i.values) } }) : $(n).slider({ min: i, max: r, value: f, slide: function (n, i) { return t(i.value) } }) }, !1) }, f.prototype.createFlyout = function (n, t, i) { typeof i == "undefined" && (i = !0); var r = $(n); r.on("focus", this.showFlyout.bind(this, n, t, i)); r.on("click", this.showFlyout.bind(this, n, t, i)) }, f.prototype.createSingleChoiceList = function (n, t, i, r) { var e = this, f, o = t(), u = $(n); u.w2field({ type: "enum", maxHeight: u.parents(".field").hasClass("split") ? 20 : 1e3, items: [], selected: this.getSelectedItems(o, i, !1), max: 1, onAdd: function (i) { t(i.id); n.hide() }, onRemove: function () { t(null) }, onShow: function () { var t = u.data("selected"), i; t.length > 0 && (i = t[0], n.remove(0), f = i) }, onHide: function () { var t = u.data("selected"); t.length == 0 && f && (n.add(f), f = null, n.refresh()) }, onItemClick: function (n) { if (r) { var t = u.data("selected"), i = $("div", n).attr("index"), f = t[i]; r.call(n, f) } else u.siblings(".w2ui-list").click() } }); u.addClass("has-list"); u.parent().addClass("single-select"); r && u.parent().addClass("select-list"); u.hasClass("wide") && u.parent().addClass("wide-list"); t.subscribe(function (t) { var r, f; t ? (r = e.getSelectedItems(t, i, !1), u.data("selected", r), n.refresh()) : (f = u.data("selected"), f.length > 0 && (u.data("selected", []), n.refresh())) }); this.loadChoices(i, function (r) { var s = u.data("settings"), f, o; s.items = r; f = t(); f && (o = e.getSelectedItems(f, i, !1), u.data("selected", o)); n.refresh() }) }, f.prototype.createMultipleChoiceList = function (n, t, i, r) { var f = this, e = t(), u = $(n), o = this; u.w2field({ type: "enum", maxHeight: 1e3, items: [], selected: this.getSelectedItems(e, i, !0), onAdd: function (n) { var i = u.data("selected"); t(AppData.select(i.concat([n]), function (n) { return n.id })) }, onRemove: function () { window.setTimeout(function () { var n = u.data("selected"); t(AppData.select(n, function (n) { return n.id })) }, 100) }, onItemClick: function () { var i = u.data("selected"), f = $("div", this).attr("index"), n = i[f], t; r ? r(n) : u.data("flyout") && (u.data("vm") && (t = new Function("return " + u.data("vm") + ";")(), n = new t(n)), o.showFlyout(this, function (t) { return App.View.load({ ViewName: u.data("flyout"), ViewContext: n }, t) })) } }); u.addClass("has-list"); u.parent().addClass("multi-select"); (r || u.data("flyout")) && u.parent().addClass("select-list"); u.hasClass("wide") && u.parent().addClass("wide-list"); t.subscribe(function (t) { if (t) { var r = f.getSelectedItems(t, i, !0); u.data("selected", r); n.refresh() } }); this.loadChoices(i, function (r) { var s = u.data("settings"), e, o; s.items = r; e = t(); e && (o = f.getSelectedItems(e, i, !0), u.data("selected", o)); n.refresh() }) }, f.prototype.createLookup = function (n, t, i, r) { var s = t(), u = $(n), f = document.createElement("DIV"), o = !1, e = new Ccx.Xrm.Shared.App.LookupViewModel(t, i, r); e.LookupVisible.subscribe(function (n) { n ? $(".lookup", f).width(u.width() + 28) : document.body.focus() }); u.focus(function () { e.LookupVisible(!0); n.select() }); u.blur(function () { o == !1 && e.LookupVisible(!1) }); u.keyup(function () { return t(u.val()) }); u.parent(".control").append(f); App.View.load({ ViewName: "Ccx-App-Lookup", ViewContext: e }, f); $(".lookup", f).focusin(function () { o = !0 }); $(".lookup", f).blur(function () { o = !1; e.LookupVisible(!1) }) }, f.prototype.createToggleList = function (n, t, i) { var r = $(n).parent(".control"), u = function (n) { return n == "false" ? !1 : n == "true" ? !0 : n }, e = function () { var n; return r.find("input[type=radio]").each(function (t, i) { i.checked && (n = u(i.value)) }), n }, f = function (n) { if (n === !1 || n) { var t = n.toString(); r.find("input[type=radio]").each(function (n, i) { i.value == t && (i.checked = !0, $(i).change()) }); window.setTimeout(function () { return r.buttonset("refresh") }, 500) } }; this.loadChoices(i, function (i) { var h, e, o, s; for (r.empty(), r.append(n), h = AppData.createId(), e = 0; e < i.length; e++) o = AppData.createId(), s = i[e], r.append('<input type="radio" id="' + o + '" name="' + h + '" value="' + s.id + '" />'), r.append('<label for="' + o + '">' + s.text + "<\/label>"); r.buttonset(); r.find("input[type=radio]").change(function () { t(u($(this).val())) }); f(t()) }); t.subscribe(f) }, f.prototype.getSelectedItems = function (n, t, i) { var f, e = [], r, o, u; for (n && !$.isArray(n) ? (n = n.toString(), n = i ? n.indexOf(",") > -1 ? n.split(",") : [n] : [n]) : n || (n = []), f = typeof t == "function" ? this.applyChoices(t()) : this.applyChoices(t), r = 0; r < n.length; r++) o = n[r], u = AppData.where(f, function (n) { return n.id == o })[0], u && e.push(u); return e }, f.prototype.getFieldValueFormatter = function (n) { switch (n) { case 0: case 5: return t; case 1: return r; case 2: return u; case 3: case 4: return i; default: return null } }, f.prototype.applyChoices = function (n) { return AppData.select(n, function (n) { return typeof n == "object" ? { id: n.Value, text: n.Text, data: n.Data } : { id: n, text: n } }) }, f.prototype.loadChoices = function (n, t) { var i = this; typeof n == "function" ? (typeof n.subscribe == "function" && n.subscribe(function (n) { t(i.applyChoices(n)) }), t(this.applyChoices(n()))) : t(this.applyChoices(n)) }, f.prototype.setObservableValue = function (n, t) { n && (typeof n == "function" ? (t(n()), n.subscribe(t)) : t(n)) }, f.prototype.showFlyout = function (t, i, r) { typeof r == "undefined" && (r = !0); var u = $(t), f = AppData.createId(); u.w2overlay('<div class="ccx-flyout" id="' + f + '"><\/div>', { onShow: function () { n.await(function () { return document.getElementById(f) }, function (t) { r && $(t).before('<button class="ccx-ui-button image close" onclick="$(document).click();"><img alt="Close" src="' + n.icons.closeDark + '" /><\/button>'); i(t); $("#w2ui-overlay").data("popup-id", f); var e = function () { var n = $("#w2ui-overlay"), t, i; n.length != 0 && n.data("popup-id") == f && (t = u.offset().left, i = u.offset().top + window.w2utils.getSize(u, "height") + 3, n.data("position") != t + "-" + i && (n.css({ left: t, top: i }), n.data("position", t + "-" + i)), window.setTimeout(e, 100)) }; e() }) } }) }, f }(), t, i, r, u; n.DefaultFieldRenderer = f; t = function () { function n(n, t) { this.$element = $(n); this.binding = t } return n.prototype.getFieldValue = function () { return this.$element.val() }, n.prototype.setFieldValue = function (n) { var t = this.getFieldValue(); if (n === null || n === undefined) { if (t !== null && t !== undefined && t !== "") return this.$element.val(this.toFieldFormat("")), !0 } else if (t != n) return this.$element.val(this.toFieldFormat(n)), !0; return !1 }, n.prototype.getValue = function () { return this.binding() }, n.prototype.setValue = function (n) { var t = this.getValue(); if (n === null || n === undefined) { if (t !== null && t !== undefined && t !== "") return this.binding(this.toValueFormat("")), !0 } else if (t != n) return this.binding(this.toValueFormat(n)), !0; return !1 }, n.prototype.toFieldFormat = function (n) { return n && n.toString() || "" }, n.prototype.toValueFormat = function (n) { return n && n.toString() || "" }, n }(); n.TextFieldValueFormatter = t; i = function (n) { function t(t, i) { n.call(this, t, i) } return __extends(t, n), t.prototype.toFieldFormat = function (n) { if (isNaN(n) || n === "") return ""; if (n == AppData.ZERO) return "0"; var t = this.$element.data("precision"); return (t > 0 && (n = (+n).toFixed(t).toString()), n === 0 || n == "0") ? "" : n ? (n = n.toString(), n = n.indexOf(".") > -1 ? n.replace(/^0+|0+$/g, "") : n.replace(/^0+/g, ""), n.indexOf(".") == 0 && (n = "0" + n), n.indexOf(".") == n.length - 1 && (n = n.replace(".", "")), n === 0 || n == "0") ? "" : n : "" }, t.prototype.toValueFormat = function (n) { if (n === "") return ""; if (isNaN(n)) return 0; if (n === 0 || n == "0") return AppData.ZERO; var t = this.toFieldFormat(n), i = this.$element.data("precision"); return i > 0 ? (+t).toFixed(i) : parseInt(t) }, t }(t); n.NumberFieldValueFormatter = i; r = function (n) { function t(t, i) { n.call(this, t, i) } return __extends(t, n), t.prototype.toFieldFormat = function (n) { return AppData.formatDate(n) }, t.prototype.toValueFormat = function (n) { var i = AppData.parseDate(n), t; if (i) return t = this.binding(), t && t.setDate ? (t.setMonth(i.getMonth()), t.setDate(i.getDate()), t.setFullYear(i.getFullYear()), t) : i }, t }(t); n.DateFieldValueFormatter = r; u = function (n) { function t(t, i) { n.call(this, t, i) } return __extends(t, n), t.prototype.toFieldFormat = function (n) { var i = this.$element.data("military"), r = i ? "HHmm" : "h:mm tt", t = AppData.formatTime(n); if (t) { var u = t.indexOf("AM") > -1 || t.indexOf("PM") > -1 ? "h:mm tt" : "HHmm", f = $.datepicker.parseTime(u, t); return $.datepicker.formatTime(r, f) } return "" }, t.prototype.toValueFormat = function (n) { var t; if (typeof n == "object") return n; var r = this.$element.data("military"), u = r ? "HHmm" : "h:mm tt", i = $.datepicker.parseTime(u, n); if (i) return t = this.binding(), t && t.setHours ? (t.setHours(i.hour), t.setMinutes(i.minute), t) : (t = new Date, t.setHours(i.hour), t.setMinutes(i.minute), t) }, t }(t); n.TimeFieldValueFormatter = u }(AppUI || (AppUI = {})), function (n) { var t = function () { function t() { this.definition = { Steps: [] } } return t.create = function () { return new t }, t.prototype.load = function (t) { App.View.load({ ViewName: "Ccx-App-Flow", ViewContext: new n.FlowViewModel(this.definition) }, t) }, t.prototype.popup = function () { this.load(n.Popup.show()) }, t.prototype.withTitle = function (n) { return this.definition.Title = n, this }, t.prototype.withInput = function (n) { return this.definition.InputData = n, this }, t.prototype.addStep = function (n, t, i) { return this.definition.Steps.push({ Title: n, View: t, ViewModelType: i }), this }, t.prototype.addGridStep = function (t) { var i = new n.Grid; return this.definition.Steps.push({ Title: t, View: App.View.Loader, ViewModelType: App.ViewLoader.bind(null, i.load.bind(i)) }), i }, t.prototype.addFormStep = function () { return this }, t.prototype.addMenuStep = function () { return this }, t.prototype.addListStep = function () { return this }, t.prototype.addTreeStep = function () { return this }, t.prototype.addRepeatingStep = function () { return this }, t }(); n.Flow = t }(AppUI || (AppUI = {})); __extends = this.__extends || function (n, t) { function r() { this.constructor = n } for (var i in t) t.hasOwnProperty(i) && (n[i] = t[i]); r.prototype = t.prototype; n.prototype = new r }, function (n) { var t = function (t) { function i(n, i) { t.call(this); this.fields = n; this.FormViewModel = this.createVM(); i && i(this.FormViewModel.Data) } return __extends(i, t), i.create = function (n, t) { var r = n(); return new i(r, t) }, i.prototype.getData = function () { return this.FormViewModel.Data() }, i.prototype.render = function (n) { var r, u, i, o, f, e; for (this.destroy(), r = [], i = 0; i < this.fields.length; i++) o = this.fields[i], (i == 0 || o.Section != this.fields[i - 1].Section) && (u = this.addColumn(o.Section), $(u).attr("data-bind", "with:Data"), r.push(u)), f = document.createElement("DIV"), f.className = "ccx-form-field", this.renderField(f, this.fields[i]), u.appendChild(f); for (e = 0; e < r.length; e++) ko.applyBindings(this.FormViewModel, r[e]); return t.prototype.render.call(this, n) }, i.prototype.renderField = function (t, i) { var f = document.createElement("LABEL"), u, r; f.innerHTML = i.Label; t.appendChild(f); u = document.createElement("INPUT"); t.appendChild(u); r = []; r.push("field:'" + i.PropertyName + "'"); r.push("type:AppUI.FieldType." + n.FieldType[i.Type]); i.ReadOnly !== undefined && r.push("readonly:" + i.ReadOnly ? "true" : "false"); i.Required !== undefined ? r.push("required:" + i.Required ? "true" : "false") : i.RequiredObservable && r.push("required:$root." + i.PropertyName + "_required"); i.Validate && r.push("required:$root." + i.PropertyName + "_validate"); i.Format ? r.push("format:'" + i.Format + "'") : i.FormatFunc && r.push("format:$root." + i.PropertyName + "_format"); (i.Choices || i.ChoicesObservable) && (r.push("choices:$root." + i.PropertyName + "_choices"), i.ChoiceSelect && r.push("select:$root." + i.PropertyName + "_select"), i.ChoiceSelectMultiple && r.push("multiple:true")); switch (i.Type) { case 0: i.MaxLength > 0 && r.push("max:" + i.MaxLength); i.Lines > 0 && r.push("lines:" + i.Lines); break; case 1: i.MinDate && r.push("min:$root." + i.PropertyName + "_minDate"); i.MaxDate && r.push("max:$root." + i.PropertyName + "_maxDate"); break; case 2: i.MinHour > 0 && r.push("min:" + i.MinHour); i.MaxHour > 0 && r.push("max:" + i.MaxHour); i.Military && r.push("military:true"); break; case 3: i.IntegerMin > 0 && r.push("min:" + i.IntegerMin); i.IntegerMax > 0 && r.push("max:" + i.IntegerMax); i.IntegerSlider ? r.push("slider:true") : i.IntegerRange && r.push("range:true"); break; case 4: i.DecimalMin > 0 && r.push("min:" + i.DecimalMin); i.DecimalMax > 0 && r.push("max:" + i.DecimalMax); i.DecimalPrecision > 0 && r.push("precision:" + i.DecimalPrecision); break; case 8: i.CustomView && r.push("view:'" + i.CustomView + "'"); i.CustomViewContext > 0 && r.push("context:$root." + i.PropertyName + "_viewContext") } $(u).attr("data-bind", r.join(",")) }, i.prototype.createVM = function () { for (var n, t = { Data: ko.observable(null) }, i = 0; i < this.fields.length; i++) { n = this.fields[i]; n.RequiredObservable && (t[n.PropertyName + "_required"] = n.RequiredObservable); n.Validate && (t[n.PropertyName + "_validate"] = n.Validate); n.Format || n.FormatFunc && (t[n.PropertyName + "_format"] = n.FormatFunc); (n.Choices || n.ChoicesObservable) && (t[n.PropertyName + "_choices"] = n.Choices || n.ChoicesObservable, n.ChoiceSelect && (t[n.PropertyName + "_select"] = n.ChoiceSelect), n.ChoiceSelectMultiple); switch (n.Type) { case 0: n.MaxLength > 0; n.Lines > 0; break; case 1: n.MinDate && (t[n.PropertyName + "_minDate"] = n.MinDate); n.MaxDate && (t[n.PropertyName + "_maxDate"] = n.MaxDate); break; case 2: n.MinHour > 0; n.MaxHour > 0; n.Military; break; case 3: n.IntegerMin > 0; n.IntegerMax > 0; n.IntegerSlider || n.IntegerRange; break; case 4: n.DecimalMin > 0; n.DecimalMax > 0; n.DecimalPrecision > 0; break; case 8: n.CustomView; n.CustomViewContext > 0 && (t[n.PropertyName + "_viewContext"] = n.CustomViewContext) } } return t }, i }(n.PageLayout); n.Form = t }(AppUI || (AppUI = {})), function (n) { var i = function () { function i() { this.definition = { NoResultsMessage: "No results found", NoSelectionMessage: "No items selected", SelectedItemsMessage: "Selected Items", ShowViewSelection: !0, Views: [], Buttons: [] } } return i.create = function () { return new i }, i.view = function (n, t) { var r = new i; return typeof n == "function" ? n.subscribe ? (r.publish = n.subscribe.bind(n), r.addView("", function (t) { return t(n()) })) : t ? r.addPagedView("", n) : r.addView("", n) : r.addView("", function (t) { return t(n) }) }, i.prototype.load = function (t) { var u = this, r, i = function (f) { if (f) { var e = new n.GridViewModel(u.definition, u.definition.Views[f - 1], i); r = e.getSelectedItems.bind(e); App.View.load({ ViewName: "Ccx-App-Grid", ViewContext: e }, t) } }; return i(1), this.publish && this.publish(function () { return i(1) }), { reload: function () { return i(1) }, getSelectedItems: function () { return r ? r() : [] } } }, i.prototype.popup = function () { this.load(n.Popup.show()) }, i.prototype.addView = function (n, i) { var r = new t(this, n, i); return this.definition.Views.push(r.definition), r }, i.prototype.addPagedView = function (n, i, r) { typeof r == "undefined" && (r = 10); var u = new t(this, n, i); return this.definition.Views.push(u.definition), u.definition.EnablePaging = !0, u.definition.PageSize = r, u }, i.prototype.addButton = function (n, t) { return this.definition.Buttons.push({ Text: n, Action: t }), this }, i.View = "ViewLoader", i }(), t, r; n.Grid = i; t = function () { function t(n, t, i) { this.grid = n; this.definition = { Name: t, DataSource: i, Columns: [], PageSize: 10, EnablePaging: !1, EnableSearching: !1, EnableMultiSelect: !1, EnableRowSelect: !0, MultiSelectKeyPropertyName: "", ShowSelectionPreview: !1, DontHideSelectedItems: !1 } } return t.prototype.context = function () { return new App.ViewLoader(this.grid.load.bind(this.grid)) }, t.prototype.allowMultiSelect = function (n) { return this.definition.EnableRowSelect = !0, this.definition.EnableMultiSelect = !0, this.definition.MultiSelectKeyPropertyName = n, this.definition.ShowSelectionPreview = !1, this }, t.prototype.allowMultiSelectWithPreview = function (n, t) { return typeof t == "undefined" && (t = !1), this.definition.EnableRowSelect = !0, this.definition.EnableMultiSelect = !0, this.definition.MultiSelectKeyPropertyName = n, this.definition.ShowSelectionPreview = !0, this.definition.DontHideSelectedItems = t, this }, t.prototype.addTemplateColumn = function (n, t, i, r) { return typeof r == "undefined" && (r = !1), this.definition.EnableRowSelect = !1, this.definition.Columns.push({ PropertyName: "", Header: t, EnableSorting: r, ClientTemplate: this.cacheTemplate(this.getTemplate(n, i), n) }), this }, t.prototype.addCustomColumn = function (n, t) { return this.definition.Columns.push({ PropertyName: "", Header: n, EnableSorting: !1, ClientTemplate: this.cacheTemplate(t) }), this }, t.prototype.addIconColumn = function (t) { if (typeof t == "string") this.definition.Columns.push({ PropertyName: "", Header: "", EnableSorting: !1, ClientTemplate: t ? this.cacheTemplate('<img class="ccx-inline-image" src="' + t + '" alt="" />') : "" }); else { var i = n.createGlobalCallback(t); this.definition.Columns.push({ PropertyName: "", Header: "", EnableSorting: !1, ClientTemplate: this.cacheTemplate('<button class="ccx-ui-button image" data-bind="attr: { src:' + i + " }, visible: " + i + '" alt="" />') }) } return this }, t.prototype.addButtonColumn = function (t, i, r) { var u = n.createGlobalCallback(r); return this.definition.Columns.push({ PropertyName: "", Header: "", EnableSorting: !1, ClientTemplate: this.cacheTemplate('<button class="ccx-ui-button image" data-bind="onclick: ' + u + '"><img src="' + i + '" alt="' + t + '" /><\/button>') }), this }, t.prototype.addColumn = function (n, t, i) { return typeof i == "undefined" && (i = !1), this.definition.Columns.push({ PropertyName: n, Header: t, EnableSorting: i, ClientTemplate: "" }), this }, t.prototype.addListboxColumn = function (n, t, i) { var r, u, f; for (typeof i == "function" && (i = i()), r = [], r.push('<select class="ccx-inline-select" data-bind="value: ' + n + '">'), r.push('<option value="">Select...<\/option>'), u = 0; u < i.length; u++) f = i[u], r.push('<option value="' + f.Value + '">' + f.Text + "<\/option>"); return r.push("<\/select>"), this.definition.Columns.push({ PropertyName: "", Header: t, EnableSorting: !1, ClientTemplate: this.cacheTemplate(r.join(""), n) }), this }, t.prototype.allowSearching = function () { if (this.definition.EnablePaging) this.definition.EnableSearching = !0; else throw new Error("Searching can only be enabled for grids that allow paging"); return this }, t.prototype.getTemplate = function (n, t) { switch (t) { case 0: return '<span data-bind="text: AppData.formatDate(' + n + ')"><\/span>'; case 8: return '<span data-bind="text: AppData.formatTime(' + n + ')"><\/span>'; case 1: return '<span data-bind="text: AppData.formatDateTime(' + n + ')"><\/span>'; case 2: return '<input class="ccx-inline-checkbox" type="checkbox" data-bind="checked: ' + n + '" />'; case 3: return '<div class="custom-width"><input class="ccx-inline-text" data-bind="field: \'' + n + "', type: AppUI.FieldType.text, suffix: '_item_'+$parentContext.$parentContext.$index()\" /><\/div>"; case 6: return '<div class="custom-width"><input class="ccx-inline-text ccx-ui-integer" data-bind="field: \'' + n + "', type: AppUI.FieldType.integer, suffix: '_item_'+$parentContext.$parentContext.$index()\" /><\/div>"; case 7: return '<div class="custom-width"><input class="ccx-inline-text ccx-ui-decimal" data-bind="field: \'' + n + "', type: AppUI.FieldType.decimal, suffix: '_item_'+$parentContext.$parentContext.$index()\" /><\/div>"; case 4: return '<div class="custom-width"><input class="ccx-inline-text ccx-ui-date" data-bind="field: \'' + n + "', type: AppUI.FieldType.date, suffix: '_item_'+$parentContext.$parentContext.$index()\" /><\/div>"; case 5: return '<div class="custom-width"><input class="ccx-inline-text ccx-ui-time" data-bind="field: \'' + n + "', type: AppUI.FieldType.time, suffix: '_item_'+$parentContext.$parentContext.$index()\" /><\/div>" } }, t.prototype.cacheTemplate = function (n, t) { return t || (t = AppData.getHashCode(n).toString()), this.definition.Templates || (this.definition.Templates = {}), this.definition.Templates[t] || (this.definition.Templates[t] = App.Composition.addTemplate(n)), this.definition.Templates[t] }, t }(); n.GridView = t, function (n) { n[n.Date = 0] = "Date"; n[n.DateTime = 1] = "DateTime"; n[n.Checkbox = 2] = "Checkbox"; n[n.Textbox = 3] = "Textbox"; n[n.DatePicker = 4] = "DatePicker"; n[n.TimePicker = 5] = "TimePicker"; n[n.Number = 6] = "Number"; n[n.Decimal = 7] = "Decimal"; n[n.Time = 8] = "Time" }(n.GridColumnTemplate || (n.GridColumnTemplate = {})); r = n.GridColumnTemplate }(AppUI || (AppUI = {})), function (n) { var t, r, i; (function (n) { n[n.clear = 0] = "clear"; n[n.blue = 1] = "blue"; n[n.orange = 2] = "orange"; n[n.green = 3] = "green"; n[n.red = 4] = "red" })(n.MenuDefinitionItemColor || (n.MenuDefinitionItemColor = {})); t = n.MenuDefinitionItemColor, function (n) { n[n.Large = 0] = "Large"; n[n.Wide = 1] = "Wide"; n[n.Small = 2] = "Small"; n[n.Box = 3] = "Box" }(n.TileSize || (n.TileSize = {})); r = n.TileSize; i = function () { function n(n) { this.definition = n } return n.prototype.render = function (n) { var f, i, u, r; if (n && $.isArray(n)) if (ko.cleanNode(this.element), this.definition.DefaultAction) for (f = new Function("data", "with(data){" + this.definition.DefaultAction + "};"), i = 0; i < n.length; i++) u = n[i], r = { Text: u[this.definition.TextProperty], Action: f, Color: t[this.definition.DefaultColor] }, this.definition.IconProperty ? r.Icon = u[this.definition.IconProperty] || this.definition.DefaultIcon : this.definition.DefaultIcon && (r.Icon = this.definition.DefaultIcon), this.definition.Items.push(r); else this.definition.Items.concat(n); return null }, n.getItemColorClass = function (n) { return n.Color || n.Color === 0 ? "glass " + t._map[n.Color] + "-glow" : "glass" }, n }(); n.Menu = i }(AppUI || (AppUI = {})), function (n) { var t = function () { function t(t) { this.definition = t; this.id = AppData.createId(); this.layout = new n.PageLayout } return t.prototype.render = function () { var o = this, t = document.createElement("DIV"), n, r, f, s, h, c, l, i, u, e; return t.className = "ccx-page", n = document.createElement("DIV"), n.className = "page-header", t.appendChild(n), App.Navigation.canGoBack() && (r = document.createElement("A"), r.href = "javascript:void(0);", r.className = "back", r.setAttribute("onclick", "App.Navigation.goBack()"), n.appendChild(r)), this.definition.Title && (f = document.createElement("H1"), f.className = App.Navigation.canGoBack() ? "title" : "title no-back", f.innerHTML = this.definition.Title, n.appendChild(f)), this.definition.Actions && (s = document.createElement("DIV"), s.setAttribute("data-bind", "view: 'Ccx-Page-Action', context: Actions"), n.appendChild(s)), this.definition.Tabs && (h = document.createElement("DIV"), h.setAttribute("data-bind", "view: 'Ccx-Page-Tab', context: Tabs"), n.appendChild(h)), this.definition.Nav && (c = document.createElement("DIV"), c.setAttribute("data-bind", "view: 'Ccx-Page-Nav', context: Nav"), n.appendChild(c)), this.definition.Steps && (l = document.createElement("DIV"), l.setAttribute("data-bind", "view: 'Ccx-Page-Step', context: Steps"), n.appendChild(l)), i = document.createElement("DIV"), i.id = this.id + "_content", i.className = "page-content", t.appendChild(i), this.definition.Sidebar && (u = document.createElement("DIV"), u.id = this.id + "_sidebar", u.className = "page-sidebar", t.appendChild(u), i.className = "page-content with-sidebar", this.definition.Sidebar.subscribe(function (n) { $(u).empty().append(n.render({})) })), this.definition.Content && (e = document.createElement("DIV"), e.setAttribute("data-bind", "view: 'Ccx-Page-Tile', context: Tiles"), i.appendChild(e), this.definition.Content.subscribe(function (n) { $(e).empty().append(n.render({})) })), this.definition.contentElement = function () { return document.getElementById(o.id + "_content") }, this.definition.toggle = function (n, t) { for (var i = 0; i < o.definition.Tabs.length; i++) o.definition[n + "_" + i](i == t) }, ko.applyBindings(this.definition, t), t }, t.prototype.destroy = function () { }, t }(); n.Page = t }(AppUI || (AppUI = {})), function (n) { (function (n) { n[n.tree = 0] = "tree"; n[n.table = 1] = "table"; n[n.diagram = 2] = "diagram"; n[n.workflow = 3] = "workflow" })(n.TreeViewType || (n.TreeViewType = {})); var t = n.TreeViewType, i = function () { function i(n) { this.definition = n; this.loadData(); this.SelectDelegate = n.OnSelected; this.AddDelegate = n.OnAdd; this.RemoveDelegate = n.OnRemove } return i.prototype.add = function (n, t) { t && (n[this.definition.ParentIdProperty] = t[this.definition.IdProperty]); this.currentData.push(n); this.reload() }, i.prototype.getData = function () { return this.currentData }, i.prototype.loadData = function () { var n = this; this.definition.Data(function (t) { n.currentData = t; n.reload() }) }, i.prototype.render = function () { return this.element = document.createElement("DIV"), $(this.element).addClass("ccx-tree").addClass(t[this.definition.Type] + "-view").addClass("ccx-ui-loading"), this.reload(), this.element }, i.prototype.destroy = function () { }, i.prototype.reload = function () { var n, t; $(this.element).empty().removeClass("ccx-ui-loading"); n = this.currentData && this.getItems(); n && n.length > 0 ? (t = this.renderItems(n), t.className = "app-tree-container tree-root", this.element.appendChild(t)) : this.currentData ? this.element.innerHTML = "No items found." : $(this.element).addClass("ccx-ui-loading") }, i.prototype.renderItems = function (n) { var r = document.createElement("DIV"), t, u, i; for (r.className = "app-tree-container", t = 0; t < n.length; t++) u = n[t], i = document.createElement("DIV"), i.className = "app-tree-item", this.renderItem(i, u), r.appendChild(i); return r }, i.prototype.renderItem = function (t, i) { var c = this, v = document.createElement("DIV"), l, o, a, s, h, r, u, f, e, y, p; v.className = "tree-line horizontal"; t.appendChild(v); l = document.createElement("DIV"); l.className = "tree-line vertical"; t.appendChild(l); o = document.createElement("DIV"); o.className = "tree-line block"; t.appendChild(o); this.SelectDelegate && (t.onclick = function (r) { n.cancelEvent(r); c.toggleSelection(t) && c.SelectDelegate(i) }); this.definition.IconProperty && i[this.definition.IconProperty] ? a = i[this.definition.IconProperty] : this.definition.ItemIcon && (a = this.definition.ItemIcon); a && (s = document.createElement("IMG"), s.className = "tree-icon", s.src = a, s.alt = "", t.appendChild(s)); this.definition.LabelProperty && i[this.definition.LabelProperty] && (h = document.createElement("DIV"), h.className = "tree-label", h.innerHTML = i[this.definition.LabelProperty], this.definition.Type == 3 ? o.appendChild(h) : t.appendChild(h)); this.definition.DescriptionProperty && i[this.definition.DescriptionProperty] ? (r = document.createElement("DIV"), r.className = "tree-description", r.innerHTML = i[this.definition.DescriptionProperty], t.appendChild(r)) : this.definition.Type == 1 && (r = document.createElement("DIV"), r.className = "tree-description", t.appendChild(r)); (this.AddDelegate || this.RemoveDelegate) && (u = document.createElement("DIV"), u.className = "tree-toolbar", this.AddDelegate && (f = document.createElement("BUTTON"), f.className = "tree-add", f.title = "Add", f.innerHTML = "<span>Add<\/span>", f.onclick = function (t) { n.cancelEvent(t); c.addItem(i) }, u.appendChild(f)), this.RemoveDelegate && (e = document.createElement("BUTTON"), e.className = "tree-remove", e.title = "Remove", e.innerHTML = "<span>Remove<\/span>", e.onclick = function (t) { n.cancelEvent(t); c.removeItem(i) }, u.appendChild(e)), this.definition.Type == 3 ? o.appendChild(u) : t.appendChild(u)); i[this.definition.IdProperty] && (y = this.getItems(i[this.definition.IdProperty]), y.length > 0 ? (p = this.renderItems(y), t.appendChild(p)) : (v.className = "tree-line horizontal leaf", l.className = "tree-line vertical leaf")) }, i.prototype.getItems = function (n) { for (var t, r = [], i = 0; i < this.currentData.length; i++) t = this.currentData[i], (n || t[this.definition.ParentIdProperty]) && t[this.definition.ParentIdProperty] != n || r.push(t); return r }, i.prototype.addItem = function (n) { var t = {}, i = this.currentData.length; this.definition.LabelProperty && (t[this.definition.LabelProperty] = this.definition.LabelProperty + " " + i); t[this.definition.IdProperty] = AppData.createId(); t = this.AddDelegate(n, t); t && this.add(t, n) }, i.prototype.removeItem = function (t) { var i = this, r = "Are you sure you want to remove "; r += this.definition.LabelProperty ? "'" + t[this.definition.LabelProperty] + "'?" : "this item?"; n.confirm(r, function () { i.RemoveDelegate(t); for (var n = 0; n < i.currentData.length; n++) if (t === i.currentData[n]) { i.currentData.splice(n, 1); break } i.reload() }) }, i.prototype.toggleSelection = function (n) { var t = n.className == "app-tree-item"; return this.selectedElement && (this.selectedElement.className = "app-tree-item", this.selectedElement = null), t ? (n.className = "app-tree-item selected", this.selectedElement = n, !0) : void 0 }, i }(); n.Tree = i }(AppUI || (AppUI = {})), function (n) { function u(n, t, i) { window.w2confirm(n, function (n) { n == "Yes" ? t() : i && i() }) } function f(n, t, i) { return i || (i = document.body), window.w2utils.unlock(i), window.setTimeout(function () { window.w2utils.lock(i, n, !0) }, 100), t && window.setTimeout(function () { window.w2utils.unlock(i) }, t * 1e3), function () { window.w2utils.unlock(i) } } function e(n) { var t = $(n); t.css({ x: "+=200" }); window.setTimeout(function () { return t.transition({ x: 0, opacity: 1 }) }, 100) } function o(n) { var t = $(n); t.hide() } function s(n) { var i = []; for (var t in n) t[0] != 8 && i.push({ Text: t, Value: n[t] }); return i } function h(n, t, i) { for (var f = [], r = 0; r < n.length; r++) { var u = n[r], e = t ? t(u) : u.toString(), o = i ? i(u) : e; f.push({ Text: e, Value: o }) } return f } function c(n, t) { var i = AppData.select(AppData.where(n, function (n) { return n.Value == t }), function (n) { return n.Text }); return i.length > 0 ? i[0] : "" } function i(n, i) { i || (i = document.createElement("DIV")); for (var r in n) r.indexOf("@") == 0 ? i.setAttribute(r.slice(1), n[r]) : r.indexOf("on") == 0 ? i[r] = n[r] : r == "html" ? i.innerHTML = n[r] || "" : i.appendChild(t(r, n[r])); return i } function t(n, t) { var r, u, f = []; return n.replace(/#[^.]*|\.[^.]*|\w+/g, function (n) { n.indexOf("#") == 0 ? u = n.slice(1) : n.indexOf(".") == 0 ? f.push(n.slice(1)) : n && (r = document.createElement(n)) }), r || (r = document.createElement("DIV")), u && (r.id = u), f.length > 0 && (r.className = f.join(" ")), typeof t == "string" ? r.innerHTML = t : t && t.appendChild ? r.appendChild(t) : t && typeof t == "object" && i(t, r), r } function l(n, i, r) { return t("A.ccx-action-icon", { "@href": "javascript:void(0);", onclick: r, img: { "@src": i, "@alt": n }, span: n }) } function a(n) { n || (n = window.event); n.stopPropagation ? n.stopPropagation() : n.cancelBubble = !0 } function v(n, t) { typeof n == "string" && (n = function () { return window[n] }); var i = function () { var r = n(); r ? t(r) : window.setTimeout(i, 100) }; i() } function y(n, t) { typeof t == "undefined" && (t = this); var r = AppData.createId(), i = "callback_" + r.split("-").join(""); return window[i] = n.bind(t), i } var r = function () { function t() { } return t.create = function () { return t.FieldRendererType ? new t.FieldRendererType : new n.DefaultFieldRenderer }, t }(), p; n.FieldRendererFactory = r; n.confirm = u; n.loading = f; n.show = e; n.hide = o; n.listMap = s; n.list = h; n.getListItemText = c; n.createElementTree = i; n.createElement = t; n.createActionIcon = l; n.cancelEvent = a; n.await = v; n.createGlobalCallback = y, function (n) { n[n.text = 0] = "text"; n[n.date = 1] = "date"; n[n.time = 2] = "time"; n[n.integer = 3] = "integer"; n[n.decimal = 4] = "decimal"; n[n.lookup = 5] = "lookup"; n[n.choice = 6] = "choice"; n[n.toggle = 7] = "toggle"; n[n.custom = 8] = "custom" }(n.FieldType || (n.FieldType = {})); p = n.FieldType; n.colors = { magenta: "#E74C6D", purple: "#A200FF", teal: "#00ABA9", lime: "#8CBF26", brown: "#996600", pink: "#E671B8", orange: "#F09609", blue: "#1BA1E2", red: "#E2493B", gray: "#807472", indigo: "#993C75", seagreen: "#207861", brightgreen: "#1ECC23", deepblue: "#0167C0", green: "#339933", paleblue: "#8061F4", darkbrown: "#7D160D", mutered: "#E06666", muteorange: "#F6B26B", muteyellow: "#FED966", mutegreen: "#93C47D", mutegray: "#76A5AF", muteblue: "#6FA8DC", mutepurple: "#8E7CC3", muteindigo: "#A54D79" }; n.icons = { add: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAScwAAEnMBjCK5BwAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAADOklEQVQ4Tz2T7U9TZxjGT8pf0D+Dc5xhrNN98YtItsQmk5a2tNQepIoUcPhhVjHjZUt0IDRZodh3Ts9pOSxr0TnYJhQDETZeNiaLrxXMmIctzqzbt35rL+/nKD7JL+d6rvu+npeTPNz+8MleQ4fsNQ7c8rvGFq6o8bsBLb48UtYhPXrnqvo51ToUr7FTOW14E3s9Ppk8U3Uu460JzPUFc/dCxaVncmVVS2NtL4VVjXiexuKOXGE11sN6z6tnq/Twaemkwad4agL5nmzu90Apv/MV5raHMVsYxOzjIcwQs08GcfvpCOa3g8htBUqB+Z6sTxFr2iSPgfMmXcaB784F5Y2+0vSDftx42ItvH/VC3ujHUmFGh+mb5E8/6EXu/gDN+0os451oNnIdGafr2sLZYurXbqQ2u5D+rQuZrU6k1vvw4v89HWmtH+l7XVCoJlGP9Es3hvLtRZbluqYa1ZFFsTL+cwvCqyKi6yJiG8RPfuz9u6sTXfGT70FkTcR16guttGD4jljpnLSpXHvGrF3JW/DlghVD860YXerGGJFcHoT28k8dppk3utiNwblWXM1b8cVtC9rSZo1rThwpX56tx2ffH0d2PYGdvwo6u38/Q/G/og7T+/431HN55jj8t+rhjB0pc9ZIbbltqha+rw8hvRLC4937OtvPC/jn5Qsdpvd9ZTmEM+ohtE7WwhKuLXP2mElzp3h4lAPwqfW4OG1Dz00bhn+4gCd/PNS5RvrSDRv8ORvaM/VwSwfgnODRGDVpnCP2vkqTCjPcMo+WDI9WlceFnBVbTzexVdjEp1krTpHvUXi4JB72OA9Hgq/Q5ipnjx52NSWFoo1Me1zQV26mE52fsmDz0YYO0yzoSLJdBVgJR4IylOXs4aNGt2QKNktCqSEi4ERYgIW+nkQdxn8c0fHE69BA/sfXqU44J4QSy7As1xT50GANf1DjTh3M0hVKlggPc0iAeewdnBh/T4dp85iABqrR/6LwwSzLsKz+HpzRY1WNZIiKKUj3LLrl6oojUU0n4fWQnbQ7VV05STVRNgVZrzNW9/ox7Y+myEcGdiRX8rBLTJlUUX5Xc0nVZQbTzGM11vN2Z47jXgEpjVZhRO51XAAAAABJRU5ErkJggg==", edit: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAzZJREFUOE/Fkm1IU1EYx3fudVNHU7d2cdmK8CWhiD5EEgRR+UkpIqgPUQRCaKJFxowoMCNFzYqysra5WM4ob7qX67brC77lKLMVLjKxZnYnvqSmtbbp3Dyna9wP0cuyvvSD8+k8/x/Pc57D+2+o0tMBnZwc3RIfv9m4evU6lUwWzl39G63V1bK2AweyrImJj8m4uOZKqTT9vEgUwV3/HXl5eWG9dnthj043aN61y6+Vy4PXYmJ6ikSi/cVRUdFc2dJxkJs29DlsEy+ePoWtGg3UpqXBMokkWBIV5SgXi7NLJRLxbqGQqw7Bm3sCzEUKEmZp3Dhi3Ybs7Wpk62xBj2gr0h0+jK7K5QsVBPHyKkHsvkgQfC72a9x0JPbZwl8zR2PXfSbg/mLgw6nGjdBpK0V9vTb40m5Hpvx8b1VKiubSihXxx8RiwEV/ZrheCD5ZBATbmcJHgfceAwYDNIABCx+5G9cjpussK+yA3Z2d/Ralcu/51NTQ3TG1gvAZE77PSwGH1wgC81YMLVh5MEhhyE8J0JReDl835E486mjLb2xqimWX9vvuFhkmw5J8ZuyJxwDm/WYMLtA8FDQBOE+FQU89gJNafL5flXDKbLwvqSXJ38uYh0L23cJX+Wm83WsAaK4BQ0EaLMoQK0MePQYn72JTjFJY0H9juYiL/Rpt8Tbgojat9FiWlbFjzs6y432TNQAUYGVeIwY/6rDp0aqI24xKnORUxoUe06wtihxqKzj0id7s9Jlw+E1mXpThaI490zXAN1Yl0DPK6C3OW7Ghl7BIl6F6+ZDNWDrRce7LNPvn/A0iFGRFfva4awEaVfPtb2+KUp9fkkYc30NwqRD0NetlTJelcqSjzjtkugLHH25nO4uEbhKDH+7gM6+vS3f2lBOCiqNxXOIPDDSSqwabSN07c83cAFkJ39edgeOGvYGxmrWMSy3N5sqWRkZGBq9Vp0p69qCKelWr9PY/uDHm1Fc4XFSZ1VWXcYKpTlnCjN/Bfkz83JnTW28VF6o7VeXXenWXs7rvXNgxUF+SPEQVxgzUK0Jv9EcUCgWWk5Mjy808kqwpzJd0a0oi1Gcz8ZMH07iK/waP9xX45ZeTl+OpLAAAAABJRU5ErkJggg==", remove: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAABBZJREFUOE+1lF1Mk1cYx99dcN073rbM0r6tfftBP4G+/cJhgRVhrGFOiVmhWL7m1jWpi9UOpCIKApq4bCxxKtZl0U50G5kXy3a5SILNps4F2oO2MNB0Sa9IetGkzbNzaoWREa+2JznJez7eX/7n/zznof6XCFaWUycYYdlZg5L9rKnONV6tcp5gBDy8/lrpyGaQNTx4I1Jh86i43HVSXM7ieRlhbEYJxkVczuhPH3qzdw61p6dMGn+IEdL/hJLv44yAPqus9Ec00vQNmTB7UUJHMZQj0NIxiiLKIq7m6P2hjzfWp8fh6fgnhbvu/egCpw1gpUVoESbh0xPa3YFvrHoU4wyFBzol/MDu2rjI0NEhrLSEoyhyzZ99Pdln0+fg+eenYX0qBPGQLz938C00Wa3yketjGG9cI/XdqudQzGHLL3IcxE218Miggq/lFdnTEtpVwlHUeavBOdfdkU5ODhfWzw/Cn2MBWB3+ABLHBuD7d1syU0ZlECsL3nJYMg9bm2DJZoUEBiZM1bCglReuyITpsJh2lnBFD3lTnM5/t+sAig/68wS2EvLCaqgfUKAXvm1tyN1utOf+eKcNEnvrIWE2A+JqYF4rz0fkFWhEQvuxJbwS7oXZIamQvmDWBeYOtqH40R5IHTsMqWAvrBwdgHi/BxYP7QfkfBOQxVKELegUcG13BRqV0AH8/7bkFYMskARMGJW+71xNmfhH3ZDCsJT/CKTe74cnrrcB2WxFWEyvhIj89QxW5tsR9jLIBjF/Us8GZ517cot9XZA6MgDJzk5YthNYLcRwEq6zu3JnJPwgPr9jrW4G2SSHzmlkwdvN9bklbxck3W544nBA0szhUQu/GlUQUYhyo4zg1UCyQersjFLsu9lgzSz2eCDZ7YGnrS2ArBhmMcGa1QyrVgytqYIZpThzihHsfOUijPinVwSijXb0yPMepLxeSLa3A6qzwn2s6rcaDazZTJC2m2HdboKYSQuXVRKEn+C/k0J8G9PJ/bMtDvTwsDuf6uuDVEcHLNfvgQWjGq6xotx1ZWXuAYY8s3PwVx2BcjBv0ua/VEtRmBFsL5sxrbz5pvON9ONeTyE10A8rnW5YbtwL8xg2w4oyozgBxLMZlSQTM+mKMAJdI1CzofCFWpoeZoRbhT1ZU+W60+LILnk9sIJ9W97nhF8MyvxVVoSLlk98IubziGeX1Qy6Z9LlCew5hv5uq4WrWnk2LK3YenqnFJXsNKeN/tjasPG4bR/cq9UVCAyr2vSnNGji2aUqGZq3GAsENmtUb0ywldFBiWCrORwX02VhuYj7VM9Gv9Kz2UsKUXqE4RNftpn9EhpmhP5ptSxNlL2A8be3Lzyhghg6JBWyI1KBKyzhO/HaKxvsSewZuSZRhufbG+x/FxT1N8k9+pHQNh4uAAAAAElFTkSuQmCC", error: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAABNNJREFUSEuNlltMm3UYxr/LXXm5mfVEC+MwgRUGDNigHDqOZpC5KSpzm2aOGs1Gom6LRk2MRhdNcGaJMdn0ZtmFyXYBC8a4TBCYUDZlsPQwTu1gLe3XoiGRLMY9vs+fDxyMGd/kyff2/T/P7//na/sVbb3q22imnujbZM4d2prTPuzM77yRXxASLRoKyayLa/Qor2T+V4lxQ98mS+VwrrNjdLc7OXn4BUTeeg36h29i/vQpJfaccY0eeplh1sA8vgZM9iMjZeWB6bZDiJ/yIPH2YSSOtSDh2Qv9aJMSezWTNXroZYZZA7N+yQlax9zV8egJD/Q3WqAf2YPEy41IvNKI5BpxxjV66GVmtLoqToaB+7f4pw2Y7W1j7io9+U4b9EN1SBysUUoaml+j5fmyj5nkux6QISzPyu2SRuuX+zeyszQQeb0V8ReroIuiz5Uj3FSkFJN+vrVKVG2IvXj270JoTyHCzTsw1+JSWTLIIpNs9WkZzs7tmNrfgFirG7rAovtKEXBvRfCz95ckfVxmvz/vWlF0bzF8lRkY//Ys/KfaMF6bg5hsSAZZZJKt8WN2q6QoGT1QpyC6KNzgVOCZyQkltUl1FhLPFOOPZ3ci1lwEX0U6Ji6ex+zsLO76bsPXfhCRpkLFiB6oBZlka0PpWe13aiQkJ4o3FSDRXIBwbbZA31NwAqjgmY/gr8nG3NNO+Bq3Y/LShZU1tcFx2UDWyCCLTLI1b0ZW591mF2KNsiiGhGiuPhdBV5raZBmyvImvIV9Ofm4V3H/iKMYr04WxTTHICgvTm5nVqQ2npYUiTcWI1T0FXZQQJeuyEauR96A8VaAfIxKJrGjq8sVVr33HX8KEHCZeu5QlgywyvWlp05rXnrIYlTdorjoDcXcGdHcmktTuTOgy81dlYeLsp9B1/RH5T7ZhoswhmQyVYZYMssgkW/NarYv3XKmIuhyIVTgQr0hFgqpMRVIUkbm/3olI92UsLCysKPz15whUCVAy9DLDLBlkkUm2NmS1hqZ3pWKm3I5Zl10WHAoaFSNnvvo8xLq+w/379x/R7Lkv4N+ZghkjwywZzJEp7Glt0JbS5S/ZgsmyFEyJpsvsCIlhUq5jpTbMX+vGgwcPVnTv/JnVr786jdvimxI/s2SQReagzdapXbfZ20fytiAgJwmKxo3rrRIbkt2X8HBNf3AMY5WZiHzzpTEB/l78U20yKn7mKLJG8tJANr/JuYMOS/JWkQ1jYuJpaI5fvmAggL/mE5g8+ara1F8qYbkSSvhyhT85qfIUWYMOq3zRLNvUo2LAau3w5thwc4cVv5WIiq3qtART7DnnxqNyAG70q3i4CWtx6g6CbftUjgyyyFx6VPDXSx5MA3ZrYDDfiqEdFnhFN8TMU1Psb64RZxRPHhD4sPTMkiGsoPEDpB6o3GRD35MWT7/DovcXWtBfZMF10S9KVqXBNVqe00PvgEhlhUEWmUv0h0qGrT/bLXqP04yfCkSFZvSIepUsa7S0Rg+9zDBLhoFbv+QJ6Om1mYPXsky46jThx+2iAunXiDOu0UMvM8wamMeXul0bzZW9JnNHj82cvJpuwg/ZJnzv3IzuvCWx54xr9NDLDLMG5r9LjBT/FdnWu9nc3mMyXxGFRIuG2F/hGj2G10g/XJr2D86Vs7+JXqaSAAAAAElFTkSuQmCC", warning: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAjBJREFUSEu10t1LFGEUBnD/mG68CgKDxCIo7KIvAsEuAlEoQkIho6AQYutC0wxqIwrywhY0whYsWskokj4sKAoqEdYk0KLa2dp1Z3d255336ZzJmXZnzhSBXvxg5jlfA7t1ANaUGEbRxnXohQF6lOsSMYz0Lgb9tJuOXKBXoS4QQ4meH4Dz6qRLP+ygSO4LEkOJft0L/fI4HKJnjkG/PUWx3FtNDIP03CCc5z019FQbleT+amJYTX8chHpyFGq6O0S/6KIWec4jhh79fZgWHYH9qNNlzt6C+WHMf1f326G/XKNWeZ6Jocd51onK1KHfHhyGY5egSrk/GXEe//0HF0Om032opNpQTrW7rFQHlLVMB7J+xrhHp/tpRN4jhsy+1wpr4oCvRJSVhypmanLGvcF5jxjqNydQSu5H6Xarr0hUMQtV+FqTu6iXZ4J7WChg5fG9MG/uC1FmBnZ+SayVx/fQaHhXKFDTB1FI7Ebhxq4Q/nr7xyexxjM8G9xX86IX4zBHdmB5uFlk5z6jYqTFGjNHmqEXL9OqiAOVuy3IXd0ayZqbhPV+Qqx5KndaaJVwwJmNIX9lC35eaoyUjTe5pJqHd/Cu0IFiYjuy5xuiXWyCZSyQeXreLPesKCa21R5QM13IntsAo299tKFNcOhfxIyhRrlnBe/inf6BfHwjMrH6fzL6G1xSLYh3+geWTtfjW++6VcU7/QOToz1Int2J5Jn/wP0eocY7/QNrSQxXD+p+AeIgpre8psccAAAAAElFTkSuQmCC", search: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAQCAYAAAAMJL+VAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAApBJREFUOE+Vk+tLU2EcxzfF/oOI6E036aW+qb2Zb6JgaVKYkDWZRlAEUoFIhYpoqVQoq6bNlYFb2dXACxou2krb0nlJpLzkmJba3Ny87Kab89vzbMOetgfJD3w453Ce8znP+Y0JNkNa0ZJ049WP21Uf7K11X5zNKoO9tKp5ZH/kdggAm8plX0pWQnq57sEF9VSw5N0C5N0u1PV6UN/vgXrI66832otyCqqEdC0vyspDeKxUW3dKacGtLh/ezwBGO2ByAD3zQLt5FQ2DHii7bYV0MS/KGoP4Yk1KZs34el7nCj7NAf0kPOgEhhbIkdhLrnWTK6g1uvwlL4b28KKsMaSVaZ+c1VihNgMDkXAfOX4mX0Gl59+WAJVxEWVtM8W8KGs0cSfuGPsutznQMk1GQ0bykXwFHc+YC5jyhDW7gWemeRQ0zb7mRVmjiT8t7xso0jrRSmavJ/GRZRL1ArMrwNwqYCP+9gFqoxWyR+NveFHWaITn7hsaS7QL6JgNj2iS7JjGHX5geQ1wEZcCQEXbT5y8ayrlRVljyLymSitud6LFEgiNiO5+nuzaTcL+dWCNaLZ5kFU7Gjic//wAL8rKIyG/4auhumsZupkARsmI6O59QYC0Me3wIk9jRnplVyVdHB2M9h8yMjJ2n8m91HG9cSKYc88wTF/ydNCNTvIL60YXodJbIVWOBY+X66t3JR2Jp8/woqwb0HhqaqpZJpNB2dD0XSAUbjt/UyMpfDmsLnxr6bnaOGHIVZgeHr3y+CBZHvoXU3hR1hBsXKFQOLOzsw+F74SgsbiIMfCirILk5OTtEolkIy6VSkWRZ/8LXpRVkJiYuJO84JdcLt9ynMKLsoYQi8U7RCLR3vDV1uBF/wrBH4+XK5f5Z6U+AAAAAElFTkSuQmCC", closeLight: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAdNJREFUOE+dlM1O4zAUhf0iI1ZohISQuoAlYjbdIBZd8ALwUMxyxJJldzxGkVgyQiwaqjaUtoljO/b1nDh3gBY7/HySFfv63mM78YlooPH4p5fyj1dq5Ktq6J+eDsNEB74se96Ya+Rr1N35uj4PE/TwsO2tnfq3OGf8ajUICRGQ0UPLQ+4rBOEzgRUuOLCJxkInrPEC4ntos5CxiTE3gpbLEQ9jKIges1Yjtos2CTMxiqIQpNUlD1NIvII+Zdkv9LM2FIeMHgo3nx54IsmxFBV2WnE/RUay2AlHceXq2JNTPPEdJtjUbhD7D0RPIKo54SvMILbHMuvY5fOArDWc+DFEOVqPy+OYaXYK0ZpL0hDN8UH3uSwNbvw+0udtVRpyrnZ5fsplcSDWC8f4LHCUm83ijsJ02gFdWKtJynVHIdztgI8gUlRVraOoLHcQ6nZAXTeXuvtiwxw4/gGsp4cciuKMkcX93z6+Qh/DTkdB61Lg/F3vbSIfx0fhKAA7haMo6SiHH43ADm54vEmz0DsHOK3hKIo6qpbyQlitz9CnNvRCc3WSDoDogIjWHAUzTPVi8aNNMOYc7dbid47ntSmKbjsBleeHVqmruixHeP7Wy8WWEEL8A5OquZuowfj+AAAAAElFTkSuQmCC", closeDark: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAB6ElEQVQ4T42UPUvDUBSGz7lfaZK2ahVshyIOIkIROugounQRhw7+Af1ROoqjo5s/o4KjsxSVLtIPBeObtKm56W008JDce85570fueymKIuJGY5d8/4Y8r0el0j2trR3F/UVQELRJ6wfkT1D3TEpdJv3cbO6QlK9EhNYMIT6pXO7mRVLwtMH7PH/KN4QvCCNc5QIpEwx05hDbB2+zHButH4krlZ4zOGUM0dOMWAv0Z7FFwvCD2Hi3zuAvQ2xBh+v1E3y/5GIWrM09idWNQ2IeuhIyjDDTkaM/ywv74V6yFBGUT4nF2JH0X/qYVCvZlnR/IHoG0Ykj+S/eILaf6swFY2RlpctSfjqK3DC/g3ZWwxKM0Rv1c4h+OQWyMA/wQw/y9VYj6VDqAAWDBYEcLMSXqNXOF+qthlLtZBm54qXAUWJ93XLU70eRA4qQcsK+P3dUKlbsgL9gHnOplDiKOAj20FnsAKXiQ118sGEOLB8mMbCLK2GG0HoYbm13cEY7aBc6Clq3hPUX7Vvf32wcp/uDmcJRvNRRIr5oMINHVxDEA80dkCKMgaPY6Sjl+1ckjcGliMvRDsZHx3JAFoh2mdlyFMzwaqrV5jRB60vwJHGd4/2gw3CpWIpXqx1Jz7tTQdDD+9pUqltRFNEP/AgP9YSKBy4AAAAASUVORK5CYII=" } }(AppUI || (AppUI = {})), function (n) { var i = function () { function n(n, t, i, r) { this.allBindings = i; this.viewModel = r.$root; this.data = r.$data; var u = t(); this.value = typeof u == "function" ? u : ko.observable(u) } return n.prototype.getOption = function (n, t) { return this.allBindings.has(n) ? this.allBindings.get(n) : t ? t : void 0 }, n }(), r, u, t; n.behavior = i, function (t) { var b = function () { function n() { } return n.init = function (n, t, i, r, u) { var f = t(), e; f && (e = f.bind(u.$root, u.$data), $(n).click(e)) }, n }(), i, r, u, f, e, o, s, h, c, l, a, v, y, p, w; t.onclick = b; i = function () { function n() { } return n.init = function (n, t) { var i = t(); $(n).sortable({ axis: "y", handle: ".sort-drag", update: function (n, t) { var r = ko.dataFor(t.item[0]), u = ko.utils.arrayIndexOf(t.item.parent().children(), t.item[0]); u >= 0 && (i.remove(r), i.splice(u, 0, r), t.item.remove()) }, sort: function (n, t) { var i = $(n.target), r = n.pageY - i.offsetParent().offset().top - t.helper.outerHeight(!0); t.helper.css({ top: r + "px" }) } }) }, n }(); t.sortable = i; r = function () { function n() { } return n.init = function (n, t) { var r = t(), i = $(n), f = n.tagName == "TR", u = function (n) { n && i.waypoint(function (t) { var e = n.data("fixed_header"), u, r; e && (e.remove(), n.removeData("fixed_header")); u = i; t == "up" && (u = i.waypoint("prev", "vertical", n)); u.length == 1 && (r = u.clone(), r.find("*").removeAttr("data-bind"), f && (u.children().each(function (n, t) { r.children()[n].style.width = t.clientWidth + "px" }), r = $("<table cellspacing=0 cellpadding=0><\/table>").append(r)), r.addClass("fixed-header-ghost").css("position", "fixed").css("top", n.offset().top).css("left", u.offset().left), n.append(r), n.data("fixed_header", r)) }, { context: n }) }; typeof r == "string" ? window.setTimeout(function () { var n = $(r); n.length > 0 && u(n) }, 200) : u(i.parent()) }, n }(); t.fixed = r; u = function () { function n() { } return n.init = function (n, t, i, r, u) { var e = AppUI.FieldRendererFactory.create(), o = t(), f = i.has("context") ? i.get("context") : u.$data; typeof f == "function" && (f = new f(u.$data)); e.createFlyout(n, function (n) { return App.View.load({ ViewName: o, ViewContext: f }, n) }) }, n }(); t.flyout = u; f = function () { function n() { } return n.init = function (n, t, i, r, u) { var e = $("<div><\/div>"), o = $("<div><\/div>"), f; o.append($(n).css("overflow", "visible").replaceWith(e)); e.append(o); f = t(); window.setTimeout(function () { var t, r; if (t = f === !0 ? new IScroll(n, { mouseWheel: !0, scrollbars: !0, scrollX: !1, scrollY: !0 }) : new IScroll(n, f), i.has("onscroll")) { r = i.get("onscroll").bind(u.$root, u.$data, n); t.on("scrollEnd", r) } }, 200) }, n }(); t.scroll = f; e = function () { function t() { } return t.init = function (t, i, r, u, f) { var e = new n.behavior(t, i, r, f), o = AppData.observe(e.viewModel, e.data, i()); o.subscribe(function (n) { $(t).text(n || "") }) }, t }(); t.observe = e; o = function () { function t() { } return t.init = function (t, i, r, u, f) { var o = new n.behavior(t, i, r, f), e = o.getOption("condition"), c = o.getOption("holdLayout", !1), s = i(), l = typeof s == "function" ? s : AppData.observe(o.viewModel, o.data, s), a, v, h; e ? typeof e == "function" ? (a = e, e = function (n) { return a(n) }) : (v = e, e = function (n) { return n == v }) : e = function (n) { return Boolean(n) }; h = function (n) { e(n) ? c ? $(t).transition({ opacity: 1 }) : $(t).fadeIn() : c ? $(t).transition({ opacity: 0 }) : $(t).fadeOut() }; l.subscribe(h); window.setTimeout(function () { return h(l()) }, 200) }, t }(); t.toggle = o; s = function () { function n() { } return n.init = function (n, t, i, r, u) { var f = t(), e; f && u.$index && u.$index() % 2 != 0 && (e = $(n), e.addClass(f)) }, n }(); t.alternateClass = s; h = function () { function n() { } return n.init = function (n, t, i, r, u) { var f = u.$root, e = t(); e && (ko.bindingHandlers.css.init(n, function () { return { sort: !0, "sort-ascending": ko.computed(function () { return f.SortColumn() == e && f.SortAscending() }), "sort-descending": ko.computed(function () { return f.SortColumn() == e && !f.SortAscending() }) } }, i, r, u), n.onclick = function () { f.sort(e) }) }, n }(); t.sort = h; c = function () { function n() { } return n.init = function (n, t, i, r, u) { var s = t(), f = $(n), e = i.get("target") || $(".page-content").first(), o = function () { var t = $(e), n; f.addClass("selected").siblings().removeClass("selected"); n = i.has("context") ? i.get("context") : u.$data; typeof n == "function" && (n = new n(u.$data)); App.View.load({ ViewName: s, ViewContext: n }, t[0]); t.show("drop") }; f.click(o); f.parent().addClass("page-tab"); f.prevAll("a").length == 0 && AppUI.await(function () { return $(e).length > 0 }, function () { return o() }) }, n }(); t.tab = c; l = function () { function n() { } return n.init = function (n, t, i, r, u) { var e, f; if (!$(n).is("input")) return e = t(), e == App.View.Loader && i.has("context") ? i.get("context").load(n) : (f = i.has("context") ? i.get("context") : u.$data, typeof f == "function" && (f = new f(u.$data)), App.View.load({ ViewName: e, ViewContext: f }, n)), { controlsDescendantBindings: !0 } }, n }(); t.view = l; a = function () { function n() { } return n.init = function (n, t) { var i = t(); App.Navigation.goTo(i, n) }, n }(); t.frame = a; v = function () { function n() { } return n.init = function (n, t, i, r, u) { var e = t(), f = $(n); f.click(function () { App.View.location(e, i.has("context") ? i.get("context") : u.$data) }); f.addClass("tile").parent().addClass("page-column"); i.has("small") ? f.addClass("small") : i.has("wide") ? f.addClass("wide") : i.has("large") ? f.addClass("large") : f.addClass("box") }, n }(); t.tile = v; y = function () { function n() { } return n.init = function (n, t, i, r, u) { var f = t(), e = function () { var t, n; i.has("target") && (t = $(i.get("target"))[0]); n = i.has("context") ? i.get("context") : u.$data; typeof n == "function" && (n = new n(u.$data)); App.View.load({ ViewName: f, ViewContext: n }, t) }; $(n).click(e) }, n }(); t.go = y; p = function () { function n() { } return n.init = function (n, t) { var i = t(); i && typeof i.subscribe == "function" ? (i.subscribe(function (t) { n.title = t }), n.title = i()) : n.title = i }, n }(); t.title = p; w = function () { function t() { } return t.init = function (i, r, u, f, e) { var st = AppData.createId(), c = AppUI.FieldRendererFactory.create(), s = $(i), h = s.parent(), a = s.siblings("label"), o = new n.behavior(i, r, u, e), d = o.getOption("field"), ht = o.getOption("suffix"), ct = o.getOption("type", 0), y = o.getOption("required", !1), lt = o.getOption("validate"), v = o.getOption("label", a.text()), g = o.getOption("format"), l = o.getOption("choices"), nt, tt, at, vt, it, yt, b, k, rt, et, pt, wt, bt, kt, dt, p, gt, w, ot; o.value = typeof d == "function" ? d : ht ? AppData.observe(o.viewModel, o.data, d, ht) : AppData.observe(o.viewModel, o.data, d); typeof g == "function" ? s.keyup(function () { var n = s.val(); n = g(n); n != s.val() && s.val(n) }) : typeof g == "string" && s.keyup(function () { var n = s.val(); n = t.applyFormat(g, n); n != s.val() && s.val(n) }); a.length == 0 && v ? (a = $("<label>" + v + "<\/label>"), s.before(a)) : v || (v = d, a = $('<label class="hidden">' + v + "<\/label>"), s.before(a)); h.addClass("field"); a.addClass("label"); s.attr("id", st); a.attr("for", st); y && (nt = function (n) { return n === !1 || n }, typeof y == "function" && (tt = y, y = tt(), nt = function (n) { return !tt() || n === !1 || n }, tt.subscribe(function (n) { n ? (h.addClass("required"), nt(o.value()) || (h.addClass("invalid"), h.children(".validate").fadeIn())) : (h.removeClass("required"), h.removeClass("invalid"), h.children(".validate:visible").hide()) })), at = typeof y == "string" ? y : v + " is required", vt = c.createValidationIcon(o.value, at, nt), a.append('<span class="indicator">*<\/span>'), h.append(vt), y && h.addClass("required")); lt && h.append(c.createValidationIcon(o.value, v + " is invalid", lt)); it = s.parent().children("input"); it.length > 1 ? (h.addClass("split"), it.last().addClass("last"), s.attr("type", "text"), s.attr("autocomplete", "off"), s.wrap('<div class="control"><\/div>'), it.length > 2 && h.addClass("auto-width")) : s.is("input") ? (s.attr("type", "text"), s.attr("autocomplete", "off"), s.wrap('<div class="control"><\/div>'), s.hasClass("wide") && h.addClass("auto-width")) : s.is("textarea") ? (s.wrap('<div class="control"><\/div>'), h.addClass("auto-width")) : (s.addClass("control"), h.addClass("auto-width")); yt = s.parents(".read-only").length > 0; b = o.getOption("readonly"); h.find(".control").append('<div class="shade"><\/div>'); k = function (n) { n ? (s.prop("readonly", !0), h.addClass(".read-only")) : (s.prop("readonly", !1), h.removeClass(".read-only")) }; yt ? k(!0) : b ? typeof b == "function" ? (b.subscribe(k), k(b())) : k(b) : window.setTimeout(function () { s.parents(".read-only").length > 0 && k(!0) }, 200); switch (ct) { case 0: rt = o.getOption("max"); et = o.getOption("lines"); rt > 0 && (s.is("input") ? s.attr("maxlength", rt) : s.is("textarea") && h.append(c.createValidationIcon(o.value, "Too much text was entered for " + v + ". The text has been truncated.", function (n) { return !pt && (!n || n.length <= rt) ? !0 : (pt = !0, o.value, !1) }))); et > 0 && s.height(et * 22); break; case 1: wt = o.getOption("min"); bt = o.getOption("max"); c.createDatePicker(i, o.value, wt, bt); s.addClass("date"); break; case 2: var ni = o.getOption("military"), ti = o.getOption("min"), ii = o.getOption("max"); c.createTimePicker(i, o.value, ni, ti, ii); s.addClass("time"); break; case 3: var ut = o.getOption("min"), ft = o.getOption("max"), ri = o.getOption("slider"), ui = o.getOption("range"), p = o.getOption("select"); c.createNumberTextbox(i, o.value, !1, ut, ft, 0); ri ? c.createNumberSlider(i, o.value, ut, ft, !1) : ui ? c.createNumberSlider(i, o.value, ut, ft, !0) : l && c.createSingleChoiceList(i, o.value, l, p); break; case 4: var ut = o.getOption("min"), ft = o.getOption("max"), fi = o.getOption("precision", 2), p = o.getOption("select"); c.createNumberTextbox(i, o.value, !0, ut, ft, fi); l && c.createSingleChoiceList(i, o.value, l, p); break; case 5: kt = o.getOption("search", function (n, t) { return typeof l == "function" ? t(l()) : t(l), !0 }); p = o.getOption("select"); c.createLookup(i, o.value, kt.bind(o.viewModel), p.bind(o.viewModel)); s.addClass("search"); break; case 6: dt = o.getOption("multiple"); p = o.getOption("select"); dt ? c.createMultipleChoiceList(i, o.value, l, p) : c.createSingleChoiceList(i, o.value, l, p); s.addClass("more"); break; case 7: l || (l = [{ Text: "No", Value: !1 }, { Text: "Yes", Value: !0 }], o.value() === !1 || o.value() || o.value(!1)); h.addClass("auto-width"); s.attr("type", "hidden"); c.createToggleList(i, o.value, l); break; case 8: gt = o.getOption("view"); w = o.getOption("context"); typeof w == "function" ? w = new w(o.value) : w || (w = o.value); c.createFlyout(i, function (n) { return App.View.load({ ViewName: gt, ViewContext: w }, n) }); h.addClass("auto-width") } (s.is("input") || s.is("textarea")) && !l && (ot = c.getFieldValueFormatter(ct), ot && t.bindField(i, o.value, ot)) }, t.applyFormat = function (n, t) { var f, u; if (t) { var i = t.replace(/\D/g, "").split(""), e = t.replace(/[^A-Z]|[^a-z]/g, "").split(""), r = []; for (f = 0; f < n.length; f++) if (u = n[f], i.length == 0) break; else u == "#" ? r.push(i.shift()) : u == "A" ? r.push(i.shift()) : r.push(u); return u == "#" && i.length > 0 && r.push(" " + i.join("")), r.join("") } return "" }, t.bindField = function (n, t, i) { var u, r = new i(n, t), f = function () { r.setFieldValue(r.getValue()) && !u && $(n).change() }; $(n).change(function () { u || (u = !0, r.setValue(r.getFieldValue()), f(), u = !1) }); t.subscribe(f); r.setFieldValue(r.getValue()); $(n).change() }, t }(); t.field = w }(n.behaviors || (n.behaviors = {})); r = n.behaviors, function (n) { var t = function () { function n(n) { this.template = n; this.localData = {} } return n.RegisterTemplate = function (t, i) { if (!n.InMemoryTemplateEngine) { n.InMemoryTemplateEngine = new ko.nativeTemplateEngine; var r = n.InMemoryTemplateEngine.makeTemplateSource; n.InMemoryTemplateEngine.makeTemplateSource = function (t) { return n.RegisteredTemplates[t] || r(t) }; ko.setTemplateEngine(n.InMemoryTemplateEngine); n.RegisteredTemplates = {} } n.RegisteredTemplates[t] = new n(i) }, n.prototype.text = function (n) { return n && (this.template = n), this.template }, n.prototype.data = function (n, t) { return t && (this.localData[n] = t), this.localData[n] }, n }(); n.InMemoryTemplateSource = t }(n.templateSources || (n.templateSources = {})); u = n.templateSources; t = function () { function n() { } return n.prototype.render = function (n) { var t = document.createElement("DIV"); return t.setAttribute("data-bind", "{template:'" + n.ViewName + "'}"), ko.applyBindings(n.ViewContext, t), t }, n }(); n.KnockoutViewEngine = t }(ko_extensions || (ko_extensions = {})); for (ts in ko_extensions.templateSources) ko.templateSources[ts] = ko_extensions.templateSources[ts]; for (bh in ko_extensions.behaviors) ko.bindingHandlers[bh] = ko_extensions.behaviors[bh]; (function (n) { var t = function () { function t() { } return t.showMessage = function (t, i) { typeof i == "undefined" && (i = 3); var f = document.body, e, o = function () { window.clearTimeout(e); u.fadeOut("fast", function () { r && (f.removeChild(r), r = null) }) }, r = n.createElementTree({ "@class": "ccx-ui-message-container", ".ccx-ui-message": { onclick: o, ".ccx-ui-message-content": t } }), u = $(".ccx-ui-message", r); u.hide(); f.appendChild(r); u.show("puff"); i > 0 && (e = window.setTimeout(o, i * 1e3)) }, t.showDialog = function (i, r) { var f, e, o, s, u, h; for (typeof i == "undefined" && (i = null), typeof r == "undefined" && (r = ""), f = [], e = 0; e < arguments.length - 2; e++) f[e] = arguments[e + 2]; for (o = t.show(null, r), s = {}, u = 0; u < f.length; u++) s["BUTTON#button" + u] = { onclick: f[u].action, html: f[u].text }; return h = n.createElementTree({ DIV: i, ".ccx-ui-toolbar": s }, o), o }, t.show = function (t, i) { typeof t == "undefined" && (t = null); typeof i == "undefined" && (i = ""); t || (t = document.createElement("DIV")); var f = document.documentElement || document.body, e = $(t).innerWidth(), s = $(t).innerHeight(), o = t.parentNode, h = t.closePopup = function () { u.fadeOut("fast", function () { r && (o && o.appendChild(t), f.removeChild(r), r = null, $(".ccx-ui-popup-container").length == 0 && (f.style.overflow = "auto"), t.onHidePopup && t.onHidePopup()) }) }; t.hidePopup = function () { r && $(".ccx-ui-popup", r).fadeOut("fast") }; t.showPopup = function () { r && $(".ccx-ui-popup", r).fadeIn("fast") }; var r = n.createElementTree({ "@class": "ccx-ui-popup-container", ".ccx-ui-popup-shade": {}, ".ccx-ui-popup": { ".ccx-ui-popup-content": { onclick: function (t) { return n.cancelEvent(t) }, ".ccx-ui-popup-title": { ".ccx-ui-popup-close": { onclick: h }, H4: i }, ".ccx-ui-popup-body": t } } }), u = $(".ccx-ui-popup-content", r), c = $(".ccx-ui-popup-body", r); return $(".ccx-ui-popup-shade").length > 0 && ($(".ccx-ui-popup-shade", r).remove(), u.addClass("ccx-ui-noshadow")), e > 0 && u.width(e), s > 0 && c.css("overflow", "auto"), u.hide(), f.style.overflow = "hidden", f.appendChild(r), u.fadeIn("slow"), t }, t.hideAll = function () { $(".ccx-ui-popup-container .ccx-ui-popup-close").click() }, t }(); n.Popup = t })(AppUI || (AppUI = {})), function (n) { (function (n) { var t = function () { function n() { } return n }(); n.DashboardViewModel = t })(n.Shared || (n.Shared = {})); var t = n.Shared }(Ccx || (Ccx = {})), function (n) { var r = function () { function n(n) { var t = this; this.steps = n.Steps; this.Title = ko.observable(n.Title); this.ShowBreadcrumb = ko.observable(!1); this.Breadcrumbs = ko.observableArray([]); this.ShowNavigation = ko.observable(n.Steps.length > 1); this.CurrentStep = ko.observable(null); this.CurrentStepNumber = ko.observable(1); this.StepCount = ko.observable(n.Steps.length); this.FlowContext = []; this.CanGoBack = ko.computed(function () { var n = t.CurrentStep(), i = t.CurrentStepNumber() - 1; return n && i > 0 && n.CanGoBack() }); this.CanGoNext = ko.computed(function () { var i = t.CurrentStep(), r = t.CurrentStepNumber() - 1; return i && r < n.Steps.length - 1 && i.CanGoNext() }); this.BackLabel = ko.observable("&lt; Back"); this.NextLabel = ko.observable("Next &gt;"); this.IsLoading = ko.observable(!1); this.createBreadcrumbVM(n.Steps); this.selectStep(this.steps[0]) } return n.prototype.Go = function (n) { n - 1 < this.steps.length && (this.CurrentStepNumber(n), this.selectStep(this.steps[n - 1])) }, n.prototype.GoBack = function () { this.CanGoBack() && this.Go(this.CurrentStepNumber() - 1) }, n.prototype.GoNext = function (n) { this.CanGoNext() && (this.FlowContext[this.CurrentStepNumber()] = n, this.Go(this.CurrentStepNumber() + 1)) }, n.prototype.SelectBreadcrumb = function (n) { if (n.Enabled()) { var t = this.selectStep(n.Step); t.Title.subscribe(function (t) { return n.Title(t) }) } }, n.prototype.selectStep = function (n) { var i = new t(n, this.FlowContext, this.GoBack, this.GoNext); return this.CurrentStep(i), i }, n.prototype.selectBreadcrumb = function (n) { for (var i = this.Breadcrumbs(), r = !0, t = 0; t < i.length; t++) i[t].Step == n ? (r = !1, i[t].Enabled(!1), i[t].Selected(!0)) : (i[t].Enabled(r), i[t].Selected(!1)) }, n.prototype.createBreadcrumbVM = function (n) { for (var t, r = [], u = 0; u < n.length; u++) t = n[u], (t.Title || t.Icon) && r.push(new i(t)); this.ShowBreadcrumb(r.length > 0); this.Breadcrumbs(r) }, n }(), t, i; n.FlowViewModel = r; t = function () { function n(n, t, i, r) { this.View = n.View; this.ViewModel = new n.ViewModelType; this.Title = this.ViewModel.Title || ko.observable(n.Title); this.CanGoBack = this.ViewModel.CanGoBack || ko.observable(!0); this.CanGoNext = this.ViewModel.CanGoNext || ko.observable(!0); this.ViewModel.FlowContext = t; this.ViewModel.GoBack = i; this.ViewModel.GoNext = r } return n }(); n.FlowStepViewModel = t; i = function () { function n(n) { this.Step = n; this.Title = ko.observable(n.Title); this.Icon = ko.observable(n.Icon); this.Enabled = ko.observable(!1); this.Selected = ko.observable(!1) } return n }(); n.FlowBreadcrumbViewModel = i }(AppUI || (AppUI = {})), function (n) { (function (n) { (function (n) { (function (n) { var t = function () { function n() { } return n }(); n.FormViewModel = t })(n.App || (n.App = {})); var t = n.App })(n.Shared || (n.Shared = {})); var t = n.Shared })(n.Xrm || (n.Xrm = {})); var t = n.Xrm }(Ccx || (Ccx = {})); __extends = this.__extends || function (n, t) { function r() { this.constructor = n } for (var i in t) t.hasOwnProperty(i) && (n[i] = t[i]); r.prototype = t.prototype; n.prototype = new r }, function (n) { var r = function () { function n(n, t) { typeof t == "undefined" && (t = 10); this.pageSize = t; this.SearchString = ko.observable(""); this.PageNumber = ko.observable(1); this.PageCount = ko.observable(1); this.RecordCount = ko.observable(0); this.NoPrevPage = ko.observable(!0); this.NoNextPage = ko.observable(!0); this.IsDataLoading = ko.observable(!1); this.SortColumn = ko.observable(""); this.SortAscending = ko.observable(!1); this.Results = ko.observableArray([]); this.pagedData = n; this.updateData(); this.SearchString.subscribe(this.updateData.bind(this)) } return n.prototype.prevPage = function () { var n = this.PageNumber(); n--; n > 0 && (this.PageNumber(n), this.updateData()) }, n.prototype.nextPage = function () { var n = this.PageNumber(), t = this.PageCount(); n++; n <= t && (this.PageNumber(n), this.updateData()) }, n.prototype.sort = function (n) { var t = this.SortColumn(), i = this.SortAscending(); this.SortColumn(n); this.SortAscending(t == n && !i); this.PageNumber(1); this.updateData() }, n.prototype.ClearSearchString = function () { this.SearchString("") }, n.prototype.updateData = function () { this.IsDataLoading(!0); this.pagedData(this.updatePaging.bind(this), this.SearchString(), this.PageNumber(), this.pageSize, this.SortColumn(), this.SortAscending()) }, n.prototype.prepareData = function (n) { return n }, n.prototype.updatePaging = function (n) { var t = n.Items || n, i, r; t = this.prepareData(t || []); this.Results(t); this.RecordCount(n.TotalRecords || t.length); this.PageCount(Math.ceil(this.RecordCount() / this.pageSize)); i = this.PageNumber(); r = this.PageCount(); this.NoPrevPage(i == 1); this.NoNextPage(i == r); this.IsDataLoading(!1) }, n }(), i, t; n.PagedViewModel = r; i = function (n) { function i(i, r, u) { var f = this, o, e; if (n.call(this, r.DataSource, r.PageSize), this.Grid = i, this.View = r, r.EnableMultiSelect) { if (this.SelectedKeys = {}, this.SelectedAll = ko.computed({ read: function () { var n = f.Results(); return n && AppData.where(n, function (n) { return n.IsSelected() }).length == n.length }, write: function (n) { var i = f.Results(), t; if (i) for (t = 0; t < i.length; t++) i[t].IsSelected(n) } }), this.SelectedItems = ko.computed({ read: this.getSelectedItems.bind(this), write: function (n) { var t, i; if (f.View.MultiSelectKeyPropertyName) for (t = 0; t < n.length; t++) i = n[t][f.View.MultiSelectKeyPropertyName], f.SelectedKeys[i] = n[t] } }), r.ShowSelectionPreview) if (i.Views.length == 2) { if (this.View.MultiSelectKeyPropertyName) { if (i.Views[1].EnablePaging || i.Views[1].EnableSearching) throw new Error("Not supported: SelectedItems view does not support paging or searching"); } else throw new Error("Not supported: must use MultiSelect KeyPropertyName in order to use SelectedItems view"); this.MultiSelectViewModel = new t(this, i, i.Views[1], u); o = i.Views[1].DataSource; o(function (n) { var t = f.prepareData(n || [], !0); f.SelectedItems(t) }) } else this.MultiSelectViewModel = new t(this, i, r, u); else if (r.Name != "Selected Items" && i.Views.length == 2) { if (!this.View.MultiSelectKeyPropertyName) throw new Error("Not supported: must use MultiSelect KeyPropertyName in order to use pre-SelectedItems"); o = i.Views[1].DataSource; o(function (n) { var t = f.prepareData(n || [], !0); f.SelectedItems(t) }) } if (!this.View.MultiSelectKeyPropertyName) if (this.View.EnablePaging) throw new Error("Not supported: must use MultiSelect KeyPropertyName in order to Enable Paging view"); else if (this.View.EnableSearching) throw new Error("Not supported: must use MultiSelect KeyPropertyName in order to Enable Searching view"); } for (this.SelectedViewIndex = ko.observable(0), e = 0; e < i.Views.length; e++) if (i.Views[e] == r) { this.SelectedViewIndex(e + 1); break } this.SelectedViewIndex.subscribe(u); this.updateData() } return __extends(i, n), i.prototype.invokeAction = function (n) { var t = this.SelectedItems(); n(t) }, i.prototype.selectRow = function (n, t) { if (t.target && t.target.nodeName != "INPUT" && t.target.nodeName != "A" && t.target.nodeName != "IMG") if (this.View.EnableMultiSelect) { var i = n.IsSelected(); n.IsSelected(!i) } else $(t.target).closest("TR").find(".ccx-portal-menu A").first().click() }, i.prototype.getSelectedItems = function () { var t = [], i = this.Results(), n, r; if (i) for (n = 0; n < i.length; n++) i[n].IsSelected() && t.push(i[n]); if (this.View.MultiSelectKeyPropertyName) { t = []; for (r in this.SelectedKeys) this.SelectedKeys[r] != null && t.push(this.SelectedKeys[r]) } return t }, i.prototype.isItemSelected = function (n) { if (this.View.MultiSelectKeyPropertyName) { var t = n[this.View.MultiSelectKeyPropertyName]; if (t) return this.SelectedKeys[t] != null } else if (n.IsSelected) return n.IsSelected() }, i.prototype.selectItemKey = function (n) { var t = this; return function (i) { var u, e, f, r; if (t.View.MultiSelectKeyPropertyName && (u = n[t.View.MultiSelectKeyPropertyName], u && (t.SelectedKeys[u] = i ? n : null, !i))) for (e = t.getSelectedItems(), t.SelectedItems.notifySubscribers(e), f = t.Results(), r = 0; r < f.length; r++) if (f[r][t.View.MultiSelectKeyPropertyName] == u) { f[r].IsSelected(i); break } } }, i.prototype.prepareData = function (n, t) { var i, r, u; if (this.View.EnableMultiSelect) for (i = 0; i < n.length; i++) r = t || this.isItemSelected(n[i]), n[i].IsSelected ? (u = n[i].IsSelected(), r != u && n[i].IsSelected(r)) : (n[i].IsSelected = ko.observable(r), this.View.MultiSelectKeyPropertyName && n[i].IsSelected.subscribe(this.selectItemKey(n[i]))); return n }, i.prototype.updateData = function () { var t = this; this.View && (this.View.EnablePaging || this.View.EnableSearching ? n.prototype.updateData.call(this) : (this.IsDataLoading(!0), this.View.DataSource(function (n) { var i = t.prepareData(n || []); t.Results(i); t.IsDataLoading(!1) }))) }, i }(r); n.GridViewModel = i; t = function (n) { function t(i, r, u, f) { var e = this; n.call(this, r, t.createView(u), f); i.SelectedItems.subscribe(function (n) { return e.Results(n) }) } return __extends(t, n), t.createView = function (n) { return { Name: "Selected Items", Columns: n.Columns, EnablePaging: !1, EnableSearching: !1, EnableMultiSelect: !0, EnableRowSelect: n.EnableRowSelect, MultiSelectKeyPropertyName: "", ShowSelectionPreview: !1, DontHideSelectedItems: !1, PageSize: n.PageSize, DataSource: function () { } } }, t }(i); n.SelectedGridViewModel = t }(AppUI || (AppUI = {})), function (n) { (function (n) { (function (n) { (function (n) { var t = function () { function n() { } return n }(); n.ListViewModel = t })(n.App || (n.App = {})); var t = n.App })(n.Shared || (n.Shared = {})); var t = n.Shared })(n.Xrm || (n.Xrm = {})); var t = n.Xrm }(Ccx || (Ccx = {})), function (n) { (function (n) { (function (n) { (function (n) { var t = function () { function n(n, t, i) { var r = this, u, f; this.value = n; this.search = t; this.select = i; this.IsSearching = ko.observable(!1); this.IsSearchingMore = ko.observable(!1); this.SearchResultExpression = ko.observable(""); this.NonSearchResultExpression = ko.observable(""); this.LookupVisible = ko.observable(!1); this.Results = ko.observableArray([]); this.IsSelecting = !0; n.subscribe(function (t) { var i, e, o; !r.IsSelecting && t && t.length > 2 && t != u && (r.IsSearching(!0), i = t.toLowerCase().split(" "), r.Items && i.length > 1 ? (r.smartSearch(i), r.IsSearching(!1), u = t) : i.length == 1 && (t = i[0], e = AppData.createId(), f = e, o = r.search(t, function (i) { if (e == f) { r.Items = i; var o = n().toLowerCase().split(" "); r.smartSearch(o); r.IsSearching(!1); u = t } }), o || (r.IsSearching(!1), r.LookupVisible(!1)))) }); this.IsSelecting = !1 } return n.prototype.selectItem = function (n) { var i = this, t; this.IsSelecting = !0; this.IsSearchingMore() || this.SearchResultExpression(n.Text); t = this.select(n, function (n) { i.Results(n); i.IsSearching(!1) }); this.IsSearching(t); this.LookupVisible(t); this.IsSearchingMore(t); this.IsSelecting = !1 }, n.prototype.smartSearch = function (n) { for (var e, i, r, t, o, u = [], f = 0; f < this.Items.length; f++) { for (e = this.Items[f], i = [], r = 1; r < n.length; r++) { if (t = n[r], !t) { i.push(t); continue } e.Text.indexOf(t) > -1 && i.push(t) } i.length == n.length - 1 && u.push(e) } this.NonSearchResultExpression(""); o = n.join(" "); u.length == 0 && (o = n[0], this.NonSearchResultExpression(n.slice(1).join(" "))); this.Results(u); this.SearchResultExpression(o) }, n }(); n.LookupViewModel = t })(n.App || (n.App = {})); var t = n.App })(n.Shared || (n.Shared = {})); var t = n.Shared })(n.Xrm || (n.Xrm = {})); var t = n.Xrm }(Ccx || (Ccx = {})), function (n) { (function (n) { (function (n) { (function (n) { var t = function () { function n() { } return n }(); n.MenuViewModel = t })(n.App || (n.App = {})); var t = n.App })(n.Shared || (n.Shared = {})); var t = n.Shared })(n.Xrm || (n.Xrm = {})); var t = n.Xrm }(Ccx || (Ccx = {})), function (n) { (function (n) { (function (n) { (function (n) { var t = function () { function n() { } return n }(); n.TreeViewModel = t })(n.App || (n.App = {})); var t = n.App })(n.Shared || (n.Shared = {})); var t = n.Shared })(n.Xrm || (n.Xrm = {})); var t = n.Xrm }(Ccx || (Ccx = {}));