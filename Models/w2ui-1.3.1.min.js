function w2ui_hide_items_flyout(){var n=$("#w2ui-global-items"),t;!window.w2uiIsflyout&&n.length>0&&(t=n.data("hide"),t?(n.data("hide",null),t()):n.remove())}var w2ui=w2ui||{},w2obj=w2obj||{},w2utils=function(){function t(n){var t=/^[-]?[0-9]+$/;return t.test(n)}function i(n){var t=new RegExp(w2utils.settings.float);return t.test(n)}function r(n){var t=new RegExp(w2utils.settings.currency);return t.test(n)}function u(n){return/^[a-fA-F0-9]+$/.test(n)}function f(n){return/^[a-zA-Z0-9_-]+$/.test(n)}function e(n){return/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(n)}function o(n,t,i){if(!n)return!1;t||(t=w2utils.settings.date_format);var r=n.replace(/-/g,"/").replace(/\./g,"/").toLowerCase().split("/"),o=t.replace(/-/g,"/").replace(/\./g,"/").toLowerCase(),s="Invalid Date",u,f,e;return(o=="mm/dd/yyyy"&&(u=r[0],f=r[1],e=r[2]),o=="m/d/yyyy"&&(u=r[0],f=r[1],e=r[2]),o=="dd/mm/yyyy"&&(u=r[1],f=r[0],e=r[2]),o=="d/m/yyyy"&&(u=r[1],f=r[0],e=r[2]),o=="yyyy/dd/mm"&&(u=r[2],f=r[1],e=r[0]),o=="yyyy/d/m"&&(u=r[2],f=r[1],e=r[0]),o=="yyyy/mm/dd"&&(u=r[1],f=r[2],e=r[0]),o=="yyyy/m/d"&&(u=r[1],f=r[2],e=r[0]),o=="mm/dd/yy"&&(u=r[0],f=r[1],e=parseInt(r[2])+1900),o=="m/d/yy"&&(u=r[0],f=r[1],e=parseInt(r[2])+1900),o=="dd/mm/yy"&&(u=r[1],f=r[0],e=parseInt(r[2])+1900),o=="d/m/yy"&&(u=r[1],f=r[0],e=parseInt(r[2])+1900),o=="yy/dd/mm"&&(u=r[2],f=r[1],e=parseInt(r[0])+1900),o=="yy/d/m"&&(u=r[2],f=r[1],e=parseInt(r[0])+1900),o=="yy/mm/dd"&&(u=r[1],f=r[2],e=parseInt(r[0])+1900),o=="yy/m/d"&&(u=r[1],f=r[2],e=parseInt(r[0])+1900),s=new Date(u+"/"+f+"/"+e),typeof u=="undefined")?!1:s=="Invalid Date"?!1:s.getMonth()+1!=u||s.getDate()!=f||s.getFullYear()!=e?!1:i===!0?s:!0}function s(n){var i,t;return String(n)=="undefined"?!1:(n=n.toUpperCase(),i=n.indexOf("PM")>=0||n.indexOf("AM")>=0?12:23,n=$.trim(n.replace("AM","")),n=$.trim(n.replace("PM","")),t=n.split(":"),t.length!=2)?!1:t[0]==""||parseInt(t[0])<0||parseInt(t[0])>i||!this.isInt(t[0])?!1:t[1]==""||parseInt(t[1])<0||parseInt(t[1])>59||!this.isInt(t[1])?!1:!0}function h(n){var f,i;if(n==""||typeof n=="undefined"||n==null||(w2utils.isInt(n)&&(n=Number(n)),f=new Date(n),w2utils.isInt(n)&&(f=new Date(Number(n))),i=String(n).split("-"),i.length==3&&(f=new Date(i[0],Number(i[1])-1,i[2])),i=String(n).split("/"),i.length==3&&(f=new Date(i[2],Number(i[0])-1,i[1])),f=="Invalid Time"))return"";var e=new Date,t=(e.getTime()-f.getTime())/1e3,r="",u="";return t<60?(r=Math.floor(t),u="sec",t<0&&(r=0,u="sec")):t<3600?(r=Math.floor(t/60),u="min"):t<86400?(r=Math.floor(t/3600),u="hour"):t<2592e3?(r=Math.floor(t/86400),u="day"):t<31104e3?(r=Math.floor(t/259200)/10,u="month"):t>=31104e3&&(r=Math.floor(t/3110400)/10,u="year"),r+" "+u+(r>1?"s":"")}function c(n){var e=w2utils.settings.shortmonths,t,i,u,r;if(n==""||typeof n=="undefined"||n==null||(w2utils.isInt(n)&&(n=Number(n)),t=new Date(n),w2utils.isInt(n)&&(t=new Date(Number(n))),i=String(n).split("-"),i.length==3&&(t=new Date(i[0],Number(i[1])-1,i[2])),i=String(n).split("/"),i.length==3&&(t=new Date(i[2],Number(i[0])-1,i[1])),t=="Invalid Date"))return"";u=new Date;r=new Date;r.setTime(r.getTime()-864e5);var f=e[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear(),s=e[u.getMonth()]+" "+u.getDate()+", "+u.getFullYear(),h=e[r.getMonth()]+" "+r.getDate()+", "+r.getFullYear(),c=t.getHours()-(t.getHours()>12?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" "+(t.getHours()>=12?"pm":"am"),l=t.getHours()-(t.getHours()>12?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()+" "+(t.getHours()>=12?"pm":"am"),o=f;return f==s&&(o=c),f==h&&(o=w2utils.lang("Yesterday")),'<span title="'+f+" "+l+'">'+o+"<\/span>"}function l(n){if(!w2utils.isFloat(n)||n=="")return"";if(n=parseFloat(n),n==0)return 0;var t=parseInt(Math.floor(Math.log(n)/Math.log(1024)));return(Math.floor(n/Math.pow(1024,t)*10)/10).toFixed(t==0?0:1)+" "+["Bt","KB","MB","GB","TB"][t]}function a(n){var t="";return(w2utils.isFloat(n)||w2utils.isInt(n)||w2utils.isMoney(n))&&(t=String(n).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),t}function v(n,t){var o=w2utils.settings.shortmonths,s=w2utils.settings.fullmonths,r,i;if((typeof t=="undefined"&&(t=this.settings.date_format),typeof n=="undefined"||n==""||n==null)||(r=new Date(n),w2utils.isInt(n)&&(r=new Date(Number(n))),i=String(n).split("-"),i.length==3&&(r=new Date(i[0],Number(i[1])-1,i[2])),i=String(n).split("/"),i.length==3&&(r=new Date(i[2],Number(i[0])-1,i[1])),r=="Invalid Date"))return"";var u=r.getFullYear(),f=r.getMonth(),e=r.getDate();return t.toLowerCase().replace("month",w2utils.settings.fullmonths[f]).replace("mon",w2utils.settings.shortmonths[f]).replace(/yyyy/g,u).replace(/yyy/g,u).replace(/yy/g,u>2e3?100+parseInt(String(u).substr(2)):String(u).substr(2)).replace(/(^|[^a-z$])y/g,"$1"+u).replace(/mm/g,(f+1<10?"0":"")+(f+1)).replace(/dd/g,(e<10?"0":"")+e).replace(/(^|[^a-z$])m/g,"$1"+(f+1)).replace(/(^|[^a-z$])d/g,"$1"+e)}function y(n,t){var s=w2utils.settings.shortmonths,h=w2utils.settings.fullmonths,i;if((typeof t=="undefined"&&(t=this.settings.time_format),typeof n=="undefined"||n==""||n==null)||(i=new Date(n),w2utils.isInt(n)&&(i=new Date(Number(n))),i=="Invalid Date"))return"";var e="am",r=i.getHours(),o=i.getHours(),u=i.getMinutes(),f=i.getSeconds();return u<10&&(u="0"+u),f<10&&(f="0"+f),(t.indexOf("am")!=-1||t.indexOf("pm")!=-1)&&(r>=12&&(e="pm"),r>12&&(r=r-12)),t.toLowerCase().replace("am",e).replace("pm",e).replace("hh",r).replace("h24",o).replace("mm",u).replace("mi",u).replace("ss",f).replace(/(^|[^a-z$])h/g,"$1"+r).replace(/(^|[^a-z$])m/g,"$1"+u).replace(/(^|[^a-z$])s/g,"$1"+f)}function p(n,t){var i;return i=typeof t!="string"?[this.settings.date_format,this.settings.time_format]:t.split("|"),this.formatDate(n,i[0])+" "+this.formatTime(n,i[1])}function w(n){if(n==null)return n;switch(typeof n){case"string":n=$.trim(String(n).replace(/(<([^>]+)>)/ig,""));break;case"object":for(var t in n)n[t]=this.stripTags(n[t])}return n}function b(n){if(n==null)return n;switch(typeof n){case"string":n=String(n).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");break;case"object":for(var t in n)n[t]=this.encodeTags(n[t])}return n}function k(n){return typeof n=="undefined"||n==""||n==null?"":String(n).replace(/([;&,\.\+\*\~'`:"\!\^#$%@\[\]\(\)=<>\|\/? {}\\])/g,"\\$1")}function d(n){function l(n){for(var t,n=String(n).replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i}var e="",o,t,i,h,c,s,r,u=0,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(n=l(n);u<n.length;)o=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),h=o>>2,c=(o&3)<<4|t>>4,s=(t&15)<<2|i>>6,r=i&63,isNaN(t)?s=r=64:isNaN(i)&&(r=64),e=e+f.charAt(h)+f.charAt(c)+f.charAt(s)+f.charAt(r);return e}function g(n){function l(n){for(var r="",t=0,i=0,u=0;t<n.length;)i=n.charCodeAt(t),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(u=n.charCodeAt(t+1),r+=String.fromCharCode((i&31)<<6|u&63),t+=2):(u=n.charCodeAt(t+1),c3=n.charCodeAt(t+2),r+=String.fromCharCode((i&15)<<12|(u&63)<<6|c3&63),t+=3);return r}var t="",o,s,h,c,f,r,e,i=0,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<n.length;)c=u.indexOf(n.charAt(i++)),f=u.indexOf(n.charAt(i++)),r=u.indexOf(n.charAt(i++)),e=u.indexOf(n.charAt(i++)),o=c<<2|f>>4,s=(f&15)<<4|r>>2,h=(r&3)<<6|e,t=t+String.fromCharCode(o),r!=64&&(t=t+String.fromCharCode(s)),e!=64&&(t=t+String.fromCharCode(h));return l(t)}function nt(n,t,i,r){function u(n,t,i){var r=!!window.webkitURL;return r||typeof i=="undefined"||(t=i),";"+n+": "+t+"; -webkit-"+n+": "+t+"; -moz-"+n+": "+t+"; -ms-"+n+": "+t+"; -o-"+n+": "+t+";"}var e=$(n).width(),o=$(n).height(),f=.5;if(!n||!t){console.log("ERROR: Cannot do transition when one of the divs is null");return}n.parentNode.style.cssText+=u("perspective","700px")+"; overflow: hidden;";n.style.cssText+="; position: absolute; z-index: 1019; "+u("backface-visibility","hidden");t.style.cssText+="; position: absolute; z-index: 1020; "+u("backface-visibility","hidden");switch(i){case"slide-left":n.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d("+e+"px, 0, 0)","translate("+e+"px, 0)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+";"+u("transform","translate3d(0, 0, 0)","translate(0, 0)");n.style.cssText+=u("transition",f+"s")+";"+u("transform","translate3d(-"+e+"px, 0, 0)","translate(-"+e+"px, 0)")},1);break;case"slide-right":n.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d(-"+e+"px, 0, 0)","translate(-"+e+"px, 0)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; "+u("transform","translate3d(0px, 0, 0)","translate(0px, 0)");n.style.cssText+=u("transition",f+"s")+"; "+u("transform","translate3d("+e+"px, 0, 0)","translate("+e+"px, 0)")},1);break;case"slide-down":n.style.cssText+="overflow: hidden; z-index: 1; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; z-index: 0; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");n.style.cssText+=u("transition",f+"s")+"; "+u("transform","translate3d(0, "+o+"px, 0)","translate(0, "+o+"px)")},1);break;case"slide-up":n.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, "+o+"px, 0)","translate(0, "+o+"px)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");n.style.cssText+=u("transition",f+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")},1);break;case"flip-left":n.style.cssText+="overflow: hidden; "+u("-transform","rotateY(0deg)");t.style.cssText+="overflow: hidden; "+u("transform","rotateY(-180deg)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; "+u("transform","rotateY(0deg)");n.style.cssText+=u("transition",f+"s")+"; "+u("transform","rotateY(180deg)")},1);break;case"flip-right":n.style.cssText+="overflow: hidden; "+u("transform","rotateY(0deg)");t.style.cssText+="overflow: hidden; "+u("transform","rotateY(180deg)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; "+u("transform","rotateY(0deg)");n.style.cssText+=u("transition",f+"s")+"; "+u("transform","rotateY(-180deg)")},1);break;case"flip-down":n.style.cssText+="overflow: hidden; "+u("transform","rotateX(0deg)");t.style.cssText+="overflow: hidden; "+u("transform","rotateX(180deg)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; "+u("transform","rotateX(0deg)");n.style.cssText+=u("transition",f+"s")+"; "+u("transform","rotateX(-180deg)")},1);break;case"flip-up":n.style.cssText+="overflow: hidden; "+u("transform","rotateX(0deg)");t.style.cssText+="overflow: hidden; "+u("transform","rotateX(-180deg)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; "+u("transform","rotateX(0deg)");n.style.cssText+=u("transition",f+"s")+"; "+u("transform","rotateX(180deg)")},1);break;case"pop-in":n.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+u("transform","scale(.8)")+"; opacity: 0;";$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; "+u("transform","scale(1)")+"; opacity: 1;";n.style.cssText+=u("transition",f+"s")+";"},1);break;case"pop-out":n.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+u("transform","scale(1)")+"; opacity: 1;";t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;";$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; opacity: 1;";n.style.cssText+=u("transition",f+"s")+"; "+u("transform","scale(1.7)")+"; opacity: 0;"},1);break;default:n.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;";$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",f+"s")+"; opacity: 1;";n.style.cssText+=u("transition",f+"s")},1)}setTimeout(function(){i=="slide-down"&&($(n).css("z-index","1019"),$(t).css("z-index","1020"));t&&$(t).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""});n&&($(n).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""}),n.parentNode&&$(n.parentNode).css({"-webkit-perspective":"","-moz-perspective":"","-ms-perspective":"","-o-perspective":""}));typeof r=="function"&&r()},f*1e3)}function tt(n,t,i){t||t==0||(t="");w2utils.unlock(n);$(n).find(">:first-child").before('<div class="w2ui-lock"><\/div><div class="w2ui-lock-msg"><\/div>');setTimeout(function(){var r=$(n).find(".w2ui-lock"),u=$(n).find(".w2ui-lock-msg");r.data("old_opacity",r.css("opacity")).css("opacity","0").show();u.data("old_opacity",u.css("opacity")).css("opacity","0").show();setTimeout(function(){var u=$(n).find(".w2ui-lock"),r=$(n).find(".w2ui-lock-msg"),f=($(n).width()-w2utils.getSize(r,"width"))/2,e=($(n).height()*.9-w2utils.getSize(r,"height"))/2;u.css({opacity:u.data("old_opacity"),left:"0px",top:"0px",width:"100%",height:"100%"});t||r.css({"background-color":"transparent",border:"0px"});i===!0&&(t='<div class="w2ui-spinner" '+(t?"":'style="width: 30px; height: 30px"')+"><\/div>"+t);r.html(t).css({opacity:r.data("old_opacity"),left:f+"px",top:e+"px"})},10)},10);$().w2tag()}function it(n){$(n).find(".w2ui-lock").remove();$(n).find(".w2ui-lock-msg").remove()}function rt(n,t){var i={left:parseInt($(n).css("border-left-width"))||0,right:parseInt($(n).css("border-right-width"))||0,top:parseInt($(n).css("border-top-width"))||0,bottom:parseInt($(n).css("border-bottom-width"))||0},r={left:parseInt($(n).css("margin-left"))||0,right:parseInt($(n).css("margin-right"))||0,top:parseInt($(n).css("margin-top"))||0,bottom:parseInt($(n).css("margin-bottom"))||0},u={left:parseInt($(n).css("padding-left"))||0,right:parseInt($(n).css("padding-right"))||0,top:parseInt($(n).css("padding-top"))||0,bottom:parseInt($(n).css("padding-bottom"))||0};switch(t){case"top":return i.top+r.top+u.top;case"bottom":return i.bottom+r.bottom+u.bottom;case"left":return i.left+r.left+u.left;case"right":return i.right+r.right+u.right;case"width":return i.left+i.right+r.left+r.right+u.left+u.right+parseInt($(n).width());case"height":return i.top+i.bottom+r.top+r.bottom+u.top+u.bottom+parseInt($(n).height());case"+width":return i.left+i.right+r.left+r.right+u.left+u.right;case"+height":return i.top+i.bottom+r.top+r.bottom+u.top+u.bottom}return 0}function ut(n){var t=this.settings.phrases[n];return typeof t=="undefined"?n:t}function ft(n){n||(n="en-us");n.length==5&&(n="locale/"+n+".json");$.ajax({url:n,type:"GET",dataType:"JSON",async:!1,cache:!1,success:function(n){var t,i;w2utils.settings=$.extend(!0,w2utils.settings,n);t=w2obj.grid.prototype;for(i in t.buttons)t.buttons[i].caption=w2utils.lang(t.buttons[i].caption),t.buttons[i].hint=w2utils.lang(t.buttons[i].hint);t.msgDelete=w2utils.lang(t.msgDelete);t.msgNotJSON=w2utils.lang(t.msgNotJSON);t.msgRefresh=w2utils.lang(t.msgRefresh)},error:function(){console.log("ERROR: Cannot load locale "+n)}})}function et(){if(n.scrollBarSize)return n.scrollBarSize;return $("body").append('<div id="_scrollbar_width" style="position: absolute; top: -300px; width: 100px; height: 100px; overflow-y: scroll;">\t<div style="height: 120px">1<\/div><\/div>'),n.scrollBarSize=100-$("#_scrollbar_width > div").width(),$("#_scrollbar_width").remove(),String(navigator.userAgent).indexOf("MSIE")>=0&&(n.scrollBarSize=n.scrollBarSize/2),n.scrollBarSize}var n={};return{settings:{locale:"en-us",date_format:"m/d/yyyy",date_display:"Mon d, yyyy",time_format:"hh:mi pm",currency:"^[$€£¥]?[-]?[0-9]*[.]?[0-9]+$",currencySymbol:"$",float:"^[-]?[0-9]*[.]?[0-9]+$",shortmonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullmonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortdays:["M","T","W","T","F","S","S"],fulldays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],RESTfull:!1,phrases:{}},isInt:t,isFloat:i,isMoney:r,isHex:u,isAlphaNumeric:f,isEmail:e,isDate:o,isTime:s,age:h,date:c,size:l,formatNumber:a,formatDate:v,formatTime:y,formatDateTime:p,stripTags:w,encodeTags:b,escapeId:k,base64encode:d,base64decode:g,transition:nt,lock:tt,unlock:it,lang:ut,locale:ft,getSize:rt,scrollBarSize:et}}(),w2popup,w2alert,w2confirm;if(w2utils.event={on:function(n,t){if($.isPlainObject(n)||(n={type:n}),n=$.extend({type:null,execute:"before",target:null,onComplete:null},n),typeof n.type=="undefined"){console.log("ERROR: You must specify event type when calling .on() method of "+this.name);return}if(typeof t=="undefined"){console.log("ERROR: You must specify event handler function when calling .on() method of "+this.name);return}this.handlers.push({event:n,handler:t})},off:function(n,t){var r,u,i;if($.isPlainObject(n)||(n={type:n}),n=$.extend({},{type:null,execute:"before",target:null,onComplete:null},n),typeof n.type=="undefined"){console.log("ERROR: You must specify event type when calling .off() method of "+this.name);return}typeof t=="undefined"&&(t=null);r=[];for(u in this.handlers)i=this.handlers[u],(i.event.type==n.type||n.type=="*")&&(i.event.target==n.target||n.target==null)&&(i.handler==t||t==null)||r.push(i);this.handlers=r},trigger:function(n){var n=$.extend({type:null,phase:"before",target:null,isStopped:!1,isCancelled:!1},n,{preventDefault:function(){this.isCancelled=!0},stopPropagation:function(){this.isStopped=!0}}),e,t,i,r,f;for(typeof n.target=="undefined"&&(n.target=null),e=this.handlers.length-1;e>=0;e--)if(t=this.handlers[e],(t.event.type==n.type||t.event.type=="*")&&(t.event.target==n.target||t.event.target==null)&&(t.event.execute==n.phase||t.event.execute=="*"||t.event.phase=="*")&&(n=$.extend({},t.event,n),i=[],r=RegExp(/\((.*?)\)/).exec(t.handler),r&&(i=r[1].split(/\s*,\s*/)),i.length==2?t.handler.call(this,n.target,n):t.handler.call(this,n),n.isStopped===!0||n.stop===!0))return n;if(f="on"+n.type.substr(0,1).toUpperCase()+n.type.substr(1),n.phase=="before"&&typeof this[f]=="function"){var u=this[f],i=[],r=RegExp(/\((.*?)\)/).exec(u);if(r&&(i=r[1].split(/\s*,\s*/)),i.length==2?u.call(this,n.target,n):u.call(this,n),n.isStopped===!0||n.stop===!0)return n}if(typeof n.object!="undefined"&&n.object!=null&&n.phase=="before"&&typeof n.object[f]=="function"){var u=n.object[f],i=[],r=RegExp(/\((.*?)\)/).exec(u);if(r&&(i=r[1].split(/\s*,\s*/)),i.length==2?u.call(this,n.target,n):u.call(this,n),n.isStopped===!0||n.stop===!0)return n}return n.phase=="after"&&n.onComplete!=null&&n.onComplete.call(this,n),n}},w2utils.keyboard=function(n){function i(){$(document).on("keydown",r);$(document).on("mousedown",u)}function r(n){var i=n.target.tagName;$.inArray(i,["INPUT","SELECT","TEXTAREA"])==-1&&$(n.target).prop("contenteditable")!="true"&&t&&w2ui[t]&&typeof w2ui[t].keydown=="function"&&w2ui[t].keydown.call(w2ui[t],n)}function u(n){var r=n.target.tagName,i=$(n.target).parents(".w2ui-reset");i.length>0&&(t=i.attr("name"))}function f(n){if(typeof n=="undefined")return t;t=n}function e(){t=null}function o(){}var t=null;return n.active=f,n.clear=e,n.register=o,i(),n}({}),function(){$.fn.w2render=function(n){$(this).length>0&&(typeof n=="string"&&w2ui[n]&&w2ui[n].render($(this)[0]),typeof n=="object"&&n.render($(this)[0]))};$.fn.w2destroy=function(n){!n&&this.length>0&&(n=this.attr("name"));typeof n=="string"&&w2ui[n]&&w2ui[n].destroy();typeof n=="object"&&n.destroy()};$.fn.w2marker=function(n){return n==""||typeof n=="undefined"?$(this).each(function(n,t){t.innerHTML=t.innerHTML.replace(/\<span class=\"w2ui\-marker\"\>(.*)\<\/span\>/ig,"$1")}):$(this).each(function(t,i){var u,r,f;typeof n=="string"&&(n=[n]);i.innerHTML=i.innerHTML.replace(/\<span class=\"w2ui\-marker\"\>(.*)\<\/span\>/ig,"$1");for(u in n)r=n[u],typeof r!="string"&&(r=String(r)),r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/&/g,"&amp;").replace(/</g,"&gt;").replace(/>/g,"&lt;"),f=new RegExp(r+"(?!([^<]+)?>)","gi"),i.innerHTML=i.innerHTML.replace(f,function(n){return'<span class="w2ui-marker">'+n+"<\/span>"})})};$.fn.w2tag=function(n,t){if($.isPlainObject(t)||(t={}),$.isPlainObject(t.css)||(t.css={}),typeof t["class"]=="undefined"&&(t["class"]=""),$(this).length==0){$(".w2ui-tag").each(function(n,t){var i=$(t).data("options");typeof i=="undefined"&&(i={});$($(t).data("taged-el")).removeClass(i["class"]);clearInterval($(t).data("timer"));$(t).remove()});return}return $(this).each(function(i,r){var s=r.id,u=w2utils.escapeId(r.id),o,e;if(n==""||n==null||typeof n=="undefined")$("#w2ui-tag-"+u).css("opacity",0),setTimeout(function(){clearInterval($("#w2ui-tag-"+u).data("timer"));$("#w2ui-tag-"+u).remove()},300);else{clearInterval($("#w2ui-tag-"+u).data("timer"));$("#w2ui-tag-"+u).remove();$("body").append('<div id="w2ui-tag-'+s+'" class="w2ui-tag '+($(r).parents(".w2ui-popup").length>0?"w2ui-tag-popup":"")+'" \tstyle=""><\/div>');o=setInterval(function(){if($(r).length==0||$(r).offset().left==0&&$(r).offset().top==0){clearInterval($("#w2ui-tag-"+u).data("timer"));f();return}$("#w2ui-tag-"+u).data("position")!=$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top&&$("#w2ui-tag-"+u).css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s",left:$(r).offset().left+r.offsetWidth+"px",top:$(r).offset().top+"px"}).data("position",$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top)},100);setTimeout(function(){$(r).offset()&&($("#w2ui-tag-"+u).css({opacity:"1",left:$(r).offset().left+r.offsetWidth+"px",top:$(r).offset().top+"px"}).html('<div style="margin-top: -2px 0px 0px -2px; white-space: nowrap;"> <div class="w2ui-tag-body">'+n+"<\/div> <\/div>").data("text",n).data("taged-el",r).data("options",t).data("position",$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top).data("timer",o),$(r).off("keypress",f).on("keypress",f).off("change",f).on("change",f).css(t.css).addClass(t["class"]),typeof t.onShow=="function"&&t.onShow())},1);e="";$(r).length>0&&(e=$(r)[0].style.cssText);function f(){$("#w2ui-tag-"+u).length<=0||(clearInterval($("#w2ui-tag-"+u).data("timer")),$("#w2ui-tag-"+u).remove(),$(r).off("keypress",f).removeClass(t["class"]),$(r).length>0&&($(r)[0].style.cssText=e),typeof t.onHide=="function"&&t.onHide())}}})};$.fn.w2overlay=function(n,t){function f(n){var i;(typeof t.onHide=="function"&&(i=t.onHide()),n||i!==!1)&&($("#w2ui-overlay").remove(),$(document).off("click",f))}function e(){$(document).on("click",f);if($("#w2ui-overlay > div").length>0){var r=$("#w2ui-overlay > div").height(),i=$("#w2ui-overlay> div").width(),n=window.innerHeight-$("#w2ui-overlay > div").offset().top-7;r>n&&$("#w2ui-overlay> div").height(n).width(i+w2utils.scrollBarSize()).css({"overflow-y":"auto"});i=$("#w2ui-overlay> div").width();n=window.innerWidth-$("#w2ui-overlay > div").offset().left-7;i>n&&$("#w2ui-overlay> div").width(n).css({"overflow-x":"auto"});typeof t.onShow=="function"&&t.onShow()}}var i,u,r;if($.isPlainObject(t)||(t={}),$.isPlainObject(t.css)||(t.css={}),this.length==0||n==""||typeof n=="undefined")return f(),$(this);$("#w2ui-overlay").length>0&&$(document).click();$("body").append('<div id="w2ui-overlay" class="w2ui-reset w2ui-overlay '+($(this).parents(".w2ui-popup").length>0?"w2ui-overlay-popup":"")+'">\t<div><\/div><\/div>');i=this;r=$("#w2ui-overlay div");r.css(t.css).html(n);typeof t["class"]!="undefined"&&r.addClass(t["class"]);typeof t.top=="undefined"&&(t.top=0);typeof t.left=="undefined"&&(t.left=0);typeof t.width=="undefined"&&(t.width=100);typeof t.height=="undefined"&&(t.height=0);u=r.css("background-color");r=$("#w2ui-overlay");typeof u!="undefined"&&u!="rgba(0, 0, 0, 0)"&&u!="transparent"&&r.css("background-color",u);r.css({display:"none",left:$(i).offset().left+t.left+"px",top:$(i).offset().top+w2utils.getSize($(i),"height")+3+t.top+"px","min-width":t.width?t.width:"auto","min-height":t.height?t.height:"auto"}).fadeIn("fast").data("position",$(i).offset().left+"x"+($(i).offset().top+i.offsetHeight)).on("click",function(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0});return t.hide=f.bind(this,!0),setTimeout(e,0),$(this)};$.fn.w2menu=function(n,t){function i(){for(var t,i,u,f='<table cellspacing="0" cellpadding="0" class="w2ui-drop-menu">',r=0;r<n.length;r++)t=n[r],typeof t=="string"?(i=t.split("|"),t={id:i[0],text:i[0],img:null,icon:null},i[1]&&(t.text=i[1]),i[2]&&(t.img=i[2]),i[3]&&(t.icon=i[3])):(typeof t.text!="undefined"&&typeof t.id=="undefined"&&(t.id=t.text),typeof t.text=="undefined"&&typeof t.id!="undefined"&&(t.text=t.id),typeof t.caption!="undefined"&&(t.text=t.caption),typeof t.img=="undefined"&&(t.img=null),typeof t.icon=="undefined"&&(t.icon=null)),u="<td>&nbsp;<\/td>",t.img&&(u='<td><div class="w2ui-tb-image w2ui-icon '+t.img+'"><\/div><\/td>'),t.icon&&(u='<td align="center"><div class="w2ui-tb-image"><span class="'+t.icon+'"><\/span><\/div><\/td>'),f+="<tr onmouseover=\"$(this).addClass('w2ui-selected');\" onmouseout=\"$(this).removeClass('w2ui-selected');\" \t\tonclick=\"$(document).click(); $.fn.w2menuHandler(event, '"+r+"');\">"+u+"\t<td>"+t.text+"<\/td><\/tr>";return f+"<\/table>"}return(typeof t.select=="undefined"&&typeof t.onSelect=="function"&&(t.select=t.onSelect),typeof t.select!="function")?(console.log("ERROR: options.select is required to be a function, not "+typeof t.select+" in $().w2menu(menu, options)"),$(this)):$.isArray(n)?($.fn.w2menuHandler=function(i,r){t.select(n[r],i,r)},$(this).w2overlay(i(),t)):(console.log("ERROR: first parameter should be an array of objects or strings in $().w2menu(menu, options)"),$(this))}}(),w2popup={},function(){$.fn.w2popup=function(n,t){typeof n=="undefined"&&(t={},n="open");$.isPlainObject(n)&&(t=n,n="open");n=n.toLowerCase();n=="load"&&typeof t=="string"&&(t={url:t});n=="open"&&typeof t.url!="undefined"&&(n="load");typeof t=="undefined"&&(t={});var i={};return $(this).length>0&&($(this).find("div[rel=title], div[rel=body], div[rel=buttons]").length>0?($(this).find("div[rel=title]").length>0&&(i.title=$(this).find("div[rel=title]").html()),$(this).find("div[rel=body]").length>0&&(i.body=$(this).find("div[rel=body]").html(),i.style=$(this).find("div[rel=body]")[0].style.cssText),$(this).find("div[rel=buttons]").length>0&&(i.buttons=$(this).find("div[rel=buttons]").html())):(i.title="&nbsp;",i.body=$(this).html()),parseInt($(this).css("width"))!=0&&(i.width=parseInt($(this).css("width"))),parseInt($(this).css("height"))!=0&&(i.height=parseInt($(this).css("height")))),w2popup[n]($.extend({},i,t))};w2popup={defaults:{title:"",body:"",buttons:"",style:"",color:"#000",opacity:.4,speed:.3,modal:!1,maximized:!1,keyboard:!0,width:500,height:300,showClose:!0,showMax:!1,transition:null},handlers:[],onOpen:null,onClose:null,onMax:null,onMin:null,onKeydown:null,open:function(n){function p(n){if(n||(n=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),t.resizing=!0,t.tmp_x=n.screenX,t.tmp_y=n.screenY,n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,n.preventDefault)n.preventDefault();else return!1}function c(n){t.resizing==!0&&(n||(n=window.event),t.tmp_div_x=n.screenX-t.tmp_x,t.tmp_div_y=n.screenY-t.tmp_y,$("#w2ui-popup").css({"-webkit-transition":"none","-webkit-transform":"translate3d("+t.tmp_div_x+"px, "+t.tmp_div_y+"px, 0px)","-moz-transition":"none","-moz-transform":"translate("+t.tmp_div_x+"px, "+t.tmp_div_y+"px)","-ms-transition":"none","-ms-transform":"translate("+t.tmp_div_x+"px, "+t.tmp_div_y+"px)","-o-transition":"none","-o-transform":"translate("+t.tmp_div_x+"px, "+t.tmp_div_y+"px)"}),$("#w2ui-panel").css({"-webkit-transition":"none","-webkit-transform":"translate3d("+t.tmp_div_x+"px, "+t.tmp_div_y+"px, 0px)","-moz-transition":"none","-moz-transform":"translate("+t.tmp_div_x+"px, "+t.tmp_div_y+"px)","-ms-transition":"none","-ms-transform":"translate("+t.tmp_div_x+"px, "+t.tmp_div_y+"px","-o-transition":"none","-o-transform":"translate("+t.tmp_div_x+"px, "+t.tmp_div_y+"px)"}))}function l(n){t.resizing==!0&&(n||(n=window.event),t.tmp_div_x=n.screenX-t.tmp_x,t.tmp_div_y=n.screenY-t.tmp_y,$("#w2ui-popup").css({"-webkit-transition":"none","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":"none","-moz-transform":"translate(0px, 0px)","-ms-transition":"none","-ms-transform":"translate(0px, 0px)","-o-transition":"none","-o-transform":"translate(0px, 0px)",left:parseInt($("#w2ui-popup").css("left"))+parseInt(t.tmp_div_x)+"px",top:parseInt($("#w2ui-popup").css("top"))+parseInt(t.tmp_div_y)+"px"}),$("#w2ui-panel").css({"-webkit-transition":"none","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":"none","-moz-transform":"translate(0px, 0px)","-ms-transition":"none","-ms-transform":"translate(0px, 0px)","-o-transition":"none","-o-transform":"translate(0px, 0px)",left:parseInt($("#w2ui-panel").css("left"))+parseInt(t.tmp_div_x)+"px",top:parseInt($("#w2ui-panel").css("top"))+parseInt(t.tmp_div_y)+"px"}),t.resizing=!1)}var a=this,e=$("#w2ui-popup").data("options"),n=$.extend({},this.defaults,{body:""},e,n),r,u,v,y,i,f,s,h,o,t;if($("#w2ui-popup").length==0&&(w2popup.handlers=[],w2popup.onMax=null,w2popup.onMin=null,w2popup.onOpen=null,w2popup.onClose=null,w2popup.onKeydown=null),n.onOpen&&(w2popup.onOpen=n.onOpen),n.onClose&&(w2popup.onClose=n.onClose),n.onMax&&(w2popup.onMax=n.onMax),n.onMin&&(w2popup.onMin=n.onMin),n.onKeydown&&(w2popup.onKeydown=n.onKeydown),window.innerHeight==undefined?(r=document.documentElement.offsetWidth,u=document.documentElement.offsetHeight,w2utils.engine=="IE7"&&(r+=21,u+=4)):(r=window.innerWidth,u=window.innerHeight),parseInt(r)-10<parseInt(n.width)&&(n.width=parseInt(r)-10),parseInt(u)-10<parseInt(n.height)&&(n.height=parseInt(u)-10),v=(parseInt(u)-parseInt(n.height))/2*.6,y=(parseInt(r)-parseInt(n.width))/2,$("#w2ui-popup").length==0){if(f=this.trigger({phase:"before",type:"open",target:"popup",options:n,present:!1}),f.isCancelled===!0)return;w2popup.lockScreen(n);i='<div id="w2ui-popup" class="w2ui-popup" style="width: '+parseInt(n.width)+"px; height: "+parseInt(n.height)+"px; opacity: 0; -webkit-transform: scale(0.8); -moz-transform: scale(0.8); -ms-transform: scale(0.8); -o-transform: scale(0.8); left: "+y+"px; top: "+v+'px;">';n.title!=""&&(i+='<div class="w2ui-msg-title">'+(n.showClose?'<div class="w2ui-msg-button w2ui-msg-close" onclick="w2popup.close(); if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">Close<\/div>':"")+(n.showMax?'<div class="w2ui-msg-button w2ui-msg-max" onclick="w2popup.toggle()">Max<\/div>':"")+n.title+"<\/div>");i+='<div class="w2ui-box1" style="'+(n.title==""?"top: 0px !important;":"")+(n.buttons==""?"bottom: 0px !important;":"")+'">';i+='<div class="w2ui-msg-body'+(!n.title!=""?" w2ui-msg-no-title":"")+(!n.buttons!=""?" w2ui-msg-no-buttons":"")+'" style="'+n.style+'">'+n.body+"<\/div>";i+="<\/div>";i+='<div class="w2ui-box2" style="'+(n.title==""?"top: 0px !important;":"")+(n.buttons==""?"bottom: 0px !important;":"")+'">';i+='<div class="w2ui-msg-body'+(!n.title!=""?" w2ui-msg-no-title":"")+(!n.buttons!=""?" w2ui-msg-no-buttons":"")+'" style="'+n.style+'"><\/div>';i+="<\/div>";n.buttons!=""&&(i+='<div class="w2ui-msg-buttons">'+n.buttons+"<\/div>");i+="<\/div>";$("body").append(i);setTimeout(function(){$("#w2ui-popup .w2ui-box2").hide();$("#w2ui-popup").css({"-webkit-transition":n.speed+"s opacity, "+n.speed+"s -webkit-transform","-webkit-transform":"scale(1)","-moz-transition":n.speed+"s opacity, "+n.speed+"s -moz-transform","-moz-transform":"scale(1)","-ms-transition":n.speed+"s opacity, "+n.speed+"s -ms-transform","-ms-transform":"scale(1)","-o-transition":n.speed+"s opacity, "+n.speed+"s -o-transform","-o-transform":"scale(1)",opacity:"1"})},1);setTimeout(function(){$("#w2ui-popup").css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":""});a.trigger($.extend(f,{phase:"after"}))},n.speed*1e3)}else{if(f=this.trigger({phase:"before",type:"open",target:"popup",options:n,present:!0}),f.isCancelled===!0)return;(typeof e=="undefined"||e.width!=n.width||e.height!=n.height)&&($("#w2ui-panel").remove(),w2popup.resize(n.width,n.height));s=$("#w2ui-popup .w2ui-box2 > .w2ui-msg-body").html(n.body);s.length>0&&(s[0].style.cssText=n.style);$("#w2ui-popup .w2ui-msg-buttons").html(n.buttons);$("#w2ui-popup .w2ui-msg-title").html((n.showClose?'<div class="w2ui-msg-button w2ui-msg-close" onclick="w2popup.close()">Close<\/div>':"")+(n.showMax?'<div class="w2ui-msg-button w2ui-msg-max" onclick="w2popup.max()">Max<\/div>':"")+n.title);h=$("#w2ui-popup .w2ui-box1")[0];o=$("#w2ui-popup .w2ui-box2")[0];w2utils.transition(h,o,n.transition);o.className="w2ui-box1";h.className="w2ui-box2";$(o).addClass("w2ui-current-box");$("#w2ui-popup").data("prev-size",null);setTimeout(function(){a.trigger($.extend(f,{phase:"after"}))},1)}if(n._last_w2ui_name=w2utils.keyboard.active(),w2utils.keyboard.active(null),$("#w2ui-popup").data("options",n),n.keyboard)$(document).on("keydown",this.keydown);t={resizing:!1};$("#w2ui-popup .w2ui-msg-title").on("mousedown",function(n){p(n)}).on("mousemove",function(n){c(n)}).on("mouseup",function(n){l(n)});$("#w2ui-popup .w2ui-msg-body").on("mousemove",function(n){c(n)}).on("mouseup",function(n){l(n)});$("#w2ui-lock").on("mousemove",function(n){c(n)}).on("mouseup",function(n){l(n)});return this},keydown:function(n){var i=$("#w2ui-popup").data("options"),t;if(i.keyboard&&(t=w2popup.trigger({phase:"before",type:"keydown",target:"popup",options:i,originalEvent:n}),t.isCancelled!==!0)){switch(n.keyCode){case 27:n.preventDefault();$("#w2ui-popup .w2ui-popup-message").length>0?w2popup.message():w2popup.close()}w2popup.trigger($.extend(t,{phase:"after"}))}},close:function(n){var i=this,n=$.extend({},$("#w2ui-popup").data("options"),n),t=this.trigger({phase:"before",type:"close",target:"popup",options:n});t.isCancelled!==!0&&($("#w2ui-popup, #w2ui-panel").css({"-webkit-transition":n.speed+"s opacity, "+n.speed+"s -webkit-transform","-webkit-transform":"scale(0.9)","-moz-transition":n.speed+"s opacity, "+n.speed+"s -moz-transform","-moz-transform":"scale(0.9)","-ms-transition":n.speed+"s opacity, "+n.speed+"s -ms-transform","-ms-transform":"scale(0.9)","-o-transition":n.speed+"s opacity, "+n.speed+"s -o-transform","-o-transform":"scale(0.9)",opacity:"0"}),w2popup.unlockScreen(),setTimeout(function(){$("#w2ui-popup").remove();$("#w2ui-panel").remove();i.trigger($.extend(t,{phase:"after"}))},n.speed*1e3),w2utils.keyboard.active(n._last_w2ui_name),n.keyboard&&$(document).off("keydown",this.keydown))},toggle:function(){var n=$("#w2ui-popup").data("options");n.maximized===!0?w2popup.min():w2popup.max()},max:function(){var i=this,n=$("#w2ui-popup").data("options"),t;n.maximized!==!0&&(t=this.trigger({phase:"before",type:"max",target:"popup",options:n}),t.isCancelled!==!0)&&(n.maximized=!0,n.prevSize=$("#w2ui-popup").css("width")+":"+$("#w2ui-popup").css("height"),$("#w2ui-popup").data("options",n),w2popup.resize(1e4,1e4,function(){i.trigger($.extend(t,{phase:"after"}))}))},min:function(){var r=this,n=$("#w2ui-popup").data("options"),t,i;n.maximized===!0&&(t=n.prevSize.split(":"),i=this.trigger({phase:"before",type:"min",target:"popup",options:n}),i.isCancelled!==!0)&&(n.maximized=!1,n.prevSize=null,$("#w2ui-popup").data("options",n),w2popup.resize(t[0],t[1],function(){r.trigger($.extend(i,{phase:"after"}))}))},get:function(){return $("#w2ui-popup").data("options")},set:function(n){w2popup.open(n)},clear:function(){$("#w2ui-popup .w2ui-msg-title").html("");$("#w2ui-popup .w2ui-msg-body").html("");$("#w2ui-popup .w2ui-msg-buttons").html("")},reset:function(){w2popup.open(w2popup.defaults)},load:function(n){function f(t,i){if(delete n.url,$("body").append('<div id="w2ui-tmp" style="display: none">'+t+"<\/div>"),typeof i!="undefined"&&$("#w2ui-tmp #"+i).length>0?$("#w2ui-tmp #"+i).w2popup(n):$("#w2ui-tmp > div").w2popup(n),$("#w2ui-tmp > style").length>0){var r=$("<div>").append($("#w2ui-tmp > style").clone()).html();$("#w2ui-popup #div-style").length==0&&$("#w2ui-ppopup").append('<div id="div-style" style="position: absolute; left: -100; width: 1px"><\/div>');$("#w2ui-popup #div-style").html(r)}$("#w2ui-tmp").remove()}var t;if(String(n.url)=="undefined"){console.log("ERROR: The url parameter is empty.");return}var r=String(n.url).split("#"),i=r[0],u=r[1];String(n)=="undefined"&&(n={});t=$("#w2ui-popup").data(i);typeof t!="undefined"&&t!=null?f(t,u):$.get(i,function(n,t,r){f(r.responseText,u);$("#w2ui-popup").data(i,r.responseText)})},message:function(n){var i,r,t,n;$().w2tag();n||(n={width:200,height:100});parseInt(n.width)<10&&(n.width=10);parseInt(n.height)<10&&(n.height=10);typeof n.hideOnClick=="undefined"&&(n.hideOnClick=!1);i=$("#w2ui-popup .w2ui-msg-title");$("#w2ui-popup .w2ui-popup-message").length==0?(r=parseInt($("#w2ui-popup").width()),$("#w2ui-popup .w2ui-box1").before('<div class="w2ui-popup-message" style="display: none; '+(i.length==0?"top: 0px;":"top: "+w2utils.getSize(i,"height")+"px;")+(typeof n.width!="undefined"?"width: "+n.width+"px; left: "+(r-n.width)/2+"px;":"left: 10px; right: 10px;")+(typeof n.height!="undefined"?"height: "+n.height+"px;":"bottom: 6px;")+'-webkit-transition: .3s; -moz-transition: .3s; -ms-transition: .3s; -o-transition: .3s;"'+(n.hideOnClick===!0?'onclick="w2popup.message();"':"")+"><\/div>"),$("#w2ui-popup .w2ui-popup-message").data("options",n)):(typeof n.width=="undefined"&&(n.width=w2utils.getSize($("#w2ui-popup .w2ui-popup-message"),"width")),typeof n.height=="undefined"&&(n.height=w2utils.getSize($("#w2ui-popup .w2ui-popup-message"),"height")));t=$("#w2ui-popup .w2ui-popup-message").css("display");$("#w2ui-popup .w2ui-popup-message").css({"-webkit-transform":t=="none"?"translateY(-"+n.height+"px)":"translateY(0px)","-moz-transform":t=="none"?"translateY(-"+n.height+"px)":"translateY(0px)","-ms-transform":t=="none"?"translateY(-"+n.height+"px)":"translateY(0px)","-o-transform":t=="none"?"translateY(-"+n.height+"px)":"translateY(0px)"});t=="none"?($("#w2ui-popup .w2ui-popup-message").show().html(n.html),setTimeout(function(){$("#w2ui-popup .w2ui-popup-message").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s","z-Index":1500});w2popup.lock();typeof n.onOpen=="function"&&n.onOpen()},300)):($("#w2ui-popup .w2ui-popup-message").css("z-Index",250),n=$("#w2ui-popup .w2ui-popup-message").data("options"),$("#w2ui-popup .w2ui-popup-message").remove(),w2popup.unlock(),typeof n.onClose=="function"&&n.onClose());setTimeout(function(){$("#w2ui-popup .w2ui-popup-message").css({"-webkit-transform":t=="none"?"translateY(0px)":"translateY(-"+n.height+"px)","-moz-transform":t=="none"?"translateY(0px)":"translateY(-"+n.height+"px)","-ms-transform":t=="none"?"translateY(0px)":"translateY(-"+n.height+"px)","-o-transform":t=="none"?"translateY(0px)":"translateY(-"+n.height+"px)"})},1)},lock:function(n,t){w2utils.lock($("#w2ui-popup"),n,t)},unlock:function(){w2utils.unlock($("#w2ui-popup"))},lockScreen:function(n){if($("#w2ui-lock").length>0)return!1;if(typeof n=="undefined"&&(n=$("#w2ui-popup").data("options")),typeof n=="undefined"&&(n={}),n=$.extend({},w2popup.defaults,n),$("body").append('<div id="w2ui-lock" \tonmousewheel="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true; if (event.preventDefault) event.preventDefault(); else return false;"\tstyle="position: '+(w2utils.engine=="IE5"?"absolute":"fixed")+"; z-Index: 1199; left: 0px; top: 0px; \t\t   padding: 0px; margin: 0px; background-color: "+n.color+'; width: 100%; height: 100%; opacity: 0;"><\/div>'),setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":n.speed+"s opacity","-moz-transition":n.speed+"s opacity","-ms-transition":n.speed+"s opacity","-o-transition":n.speed+"s opacity",opacity:n.opacity})},1),n.modal==!0){$("#w2ui-lock").on("mousedown",function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:"0.6"});window.getSelection&&window.getSelection().removeAllRanges()});$("#w2ui-lock").on("mouseup",function(){setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:n.opacity})},100);window.getSelection&&window.getSelection().removeAllRanges()})}else $("#w2ui-lock").on("mouseup",function(){w2popup.close()});return!0},unlockScreen:function(){if($("#w2ui-lock").length==0)return!1;var n=$.extend({},$("#w2ui-popup").data("options"),n);return $("#w2ui-lock").css({"-webkit-transition":n.speed+"s opacity","-moz-transition":n.speed+"s opacity","-ms-transition":n.speed+"s opacity","-o-transition":n.speed+"s opacity",opacity:0}),setTimeout(function(){$("#w2ui-lock").remove()},n.speed*1e3),!0},resize:function(n,t,i){var r=$("#w2ui-popup").data("options"),u,f;parseInt($(window).width())-10<parseInt(n)&&(n=parseInt($(window).width())-10);parseInt($(window).height())-10<parseInt(t)&&(t=parseInt($(window).height())-10);u=(parseInt($(window).height())-parseInt(t))/2*.8;f=(parseInt($(window).width())-parseInt(n))/2;$("#w2ui-popup").css({"-webkit-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-moz-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-ms-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-o-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top",top:u,left:f,width:n,height:t});typeof i=="function"&&setTimeout(function(){i()},r.speed*1e3)}};$.extend(w2popup,w2utils.event)}(),w2alert=function(n,t,i){typeof t=="undefined"&&(t=w2utils.lang("Notification"));$("#w2ui-popup").length>0?w2popup.message({width:400,height:150,html:'<div style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 40px; overflow: auto">\t\t<div class="w2ui-centered"><div style="font-size: 13px;">'+n+'<\/div><\/div><\/div><div style="position: absolute; bottom: 7px; left: 0px; right: 0px; text-align: center; padding: 5px">\t\t<input type="button" value="Ok" onclick="w2popup.message();" class="w2ui-popup-button"><\/div>',onClose:function(){typeof i=="function"&&i()}}):w2popup.open({width:450,height:200,showMax:!1,title:t,body:'<div class="w2ui-centered"><div style="font-size: 13px;">'+n+"<\/div><\/div>",buttons:'<input type="button" value="'+w2utils.lang("Ok")+'" class="w2ui-popup-button" onclick="w2popup.close();">',onClose:function(){typeof i=="function"&&i()}})},w2confirm=function(n,t,i){(typeof i=="undefined"||typeof t=="function")&&(i=t,t=w2utils.lang("Confirmation"));typeof t=="undefined"&&(t=w2utils.lang("Confirmation"));$("#w2ui-popup").length>0?w2popup.message({width:400,height:150,html:'<div style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 40px; overflow: auto">\t\t<div class="w2ui-centered"><div style="font-size: 13px;">'+n+'<\/div><\/div><\/div><div style="position: absolute; bottom: 7px; left: 0px; right: 0px; text-align: center; padding: 5px">\t\t<input id="No" type="button" value="'+w2utils.lang("No")+'" class="w2ui-popup-button">\t\t<input id="Yes" type="button" value="'+w2utils.lang("Yes")+'" class="w2ui-popup-button"><\/div>',onOpen:function(){$("#w2ui-popup .w2ui-popup-message .w2ui-popup-button").on("click",function(n){w2popup.message();typeof i=="function"&&i(n.target.id)})},onKeydown:function(n){switch(n.originalEvent.keyCode){case 13:typeof i=="function"&&i("Yes");w2popup.message();break;case 27:typeof i=="function"&&i("No");w2popup.message()}}}):w2popup.open({width:450,height:200,title:t,modal:!0,showClose:!1,body:'<div class="w2ui-centered"><div style="font-size: 13px;">'+n+"<\/div><\/div>",buttons:'<input id="No" type="button" value="'+w2utils.lang("No")+'" class="w2ui-popup-button"><input id="Yes" type="button" value="'+w2utils.lang("Yes")+'" class="w2ui-popup-button">',onOpen:function(n){n.onComplete=function(){$("#w2ui-popup .w2ui-popup-button").on("click",function(n){w2popup.close();typeof i=="function"&&i(n.target.id)})}},onKeydown:function(n){switch(n.originalEvent.keyCode){case 13:typeof i=="function"&&i("Yes");w2popup.close();break;case 27:typeof i=="function"&&i("No");w2popup.close()}}})},function(n){var t=new function(){this.customTypes=[]};n.fn.w2field=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object")return t.init.apply(this,arguments);if(typeof n=="string")return t.init.apply(this,[{type:n}]);console.log("ERROR: Method "+n+" does not exist on jQuery.w2field")};n.extend(t,{init:function(i){var r=t;return n(this).each(function(){var h,e,a,r,o,f,s,c;if(typeof t.customTypes[i.type.toLowerCase()]=="function"){t.customTypes[i.type.toLowerCase()].call(this,i);return}h=i.type.toLowerCase();switch(h){case"clear":n(this).off("focus").off("blur").off("keypress").off("keydown").off("change").removeData();n(this).prev().hasClass("w2ui-list")&&(n(this).prev().remove(),n(this).removeAttr("tabindex").css("border-color","").show());n(this).prev().hasClass("w2ui-upload")&&(n(this).prev().remove(),n(this).removeAttr("tabindex").css("border-color","").show());n(this).prev().hasClass("w2ui-field-helper")&&(n(this).css("padding-left",n(this).css("padding-top")),n(this).prev().remove());n(this).next().hasClass("w2ui-field-helper")&&(n(this).css("padding-right",n(this).css("padding-top")),n(this).next().remove());n(this).next().hasClass("w2ui-field-helper")&&n(this).next().remove();break;case"text":case"int":case"float":case"money":case"alphanumeric":case"hex":e=this;o={min:null,max:null,arrows:!1,keyboard:!0,suffix:"",prefix:""};i=n.extend({},o,i);["text","alphanumeric","hex"].indexOf(h)!=-1&&(i.arrows=!1,i.keyboard=!1);n(this).data("options",i).on("keypress",function(t){if(!t.metaKey&&!t.ctrlKey&&!t.altKey&&(t.charCode==t.keyCode||!(t.keyCode>0))){t.keyCode==13&&n(this).change();var i=String.fromCharCode(t.charCode);if(!l(i,!0))return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1}}).on("keydown",function(t,r){var o,u,s,f;if(i.keyboard){o=!1;u=n(e).val();u=l(u)?parseFloat(u):i.min||0;s=t.keyCode||r.keyCode;f=1;(t.ctrlKey||t.metaKey)&&(f=10);switch(s){case 38:n(e).val(u+f<=i.max||i.max==null?u+f:i.max).change();h=="money"&&n(e).val(Number(n(e).val()).toFixed(2));o=!0;break;case 40:n(e).val(u-f>=i.min||i.min==null?u-f:i.min).change();h=="money"&&n(e).val(Number(n(e).val()).toFixed(2));o=!0}o&&(t.preventDefault(),setTimeout(function(){e.setSelectionRange(e.value.length,e.value.length)},0))}}).on("change",function(t){var r=n(e).val(),u=!1;if(i.min!=null&&r!=""&&r<i.min&&(n(e).val(i.min).change(),u=!0),i.max!=null&&r!=""&&r>i.max&&(n(e).val(i.max).change(),u=!0),u)return t.stopPropagation(),t.preventDefault(),!1;this.value==""||l(this.value)||n(this).val(i.min!=null?i.min:"")});if(n(this).val()==""&&i.min!=null&&n(this).val(i.min),i.prefix!=""){n(this).before('<div class="w2ui-field-helper">'+i.prefix+"<\/div>");f=n(this).prev();f.css({color:n(this).css("color"),"font-family":n(this).css("font-family"),"font-size":n(this).css("font-size"),"padding-top":n(this).css("padding-top"),"padding-bottom":n(this).css("padding-bottom"),"padding-left":n(this).css("padding-left"),"padding-right":0,"margin-top":parseInt(n(this).css("margin-top"))+1+"px","margin-bottom":parseInt(n(this).css("margin-bottom"))+1+"px","margin-left":0,"margin-right":0}).on("click",function(){n(this).next().focus()});n(this).css("padding-left",f.width()+parseInt(n(this).css("padding-left"))+5+"px")}if(s=parseInt(n(this).css("padding-right")),i.arrows!=""){n(this).after('<div class="w2ui-field-helper" style="border: 1px solid transparent">&nbsp;\t<div class="w2ui-field-up" type="up">\t\t<div class="arrow-up" type="up"><\/div>\t<\/div>\t<div class="w2ui-field-down" type="down">\t\t<div class="arrow-down" type="down"><\/div>\t<\/div>\t<div style="position: absolute; height: 1px; border-top: 1px solid red"><\/div><\/div>');a=w2utils.getSize(this,"height");f=n(this).next();f.css({color:n(this).css("color"),"font-family":n(this).css("font-family"),"font-size":n(this).css("font-size"),height:n(this).height()+parseInt(n(this).css("padding-top"))+parseInt(n(this).css("padding-bottom"))+"px",padding:"0px","margin-top":parseInt(n(this).css("margin-top"))+1+"px","margin-bottom":"0px","border-left":"1px solid silver"}).css("margin-left","-"+(f.width()+parseInt(n(this).css("margin-right"))+12)+"px").on("mousedown",function(t){function r(){clearTimeout(n("body").data("_field_update_timer"));n("body").off("mouseup",r)}function i(t){n(e).focus().trigger(n.Event("keydown"),{keyCode:n(u.target).attr("type")=="up"?38:40});t!==!1&&n("body").data("_field_update_timer",setTimeout(i,60))}var f=this,u=t;n("body").on("mouseup",r);n("body").data("_field_update_timer",setTimeout(i,700));i(!1)});s+=f.width()+12;n(this).css("padding-right",s+"px")}if(i.suffix!=""){n(this).after('<div class="w2ui-field-helper">'+i.suffix+"<\/div>");f=n(this).next();f.css({color:n(this).css("color"),"font-family":n(this).css("font-family"),"font-size":n(this).css("font-size"),"padding-top":n(this).css("padding-top"),"padding-bottom":n(this).css("padding-bottom"),"padding-left":"3px","padding-right":n(this).css("padding-right"),"margin-top":parseInt(n(this).css("margin-top"))+1+"px","margin-bottom":parseInt(n(this).css("margin-bottom"))+1+"px"}).on("click",function(){n(this).prev().focus()});f.css("margin-left","-"+(f.width()+parseInt(n(this).css("padding-right"))+5)+"px");s+=f.width()+3;n(this).css("padding-right",s+"px")}function l(n,t){switch(h){case"int":return t&&["-"].indexOf(n)!=-1?!0:w2utils.isInt(n);case"float":return t&&["-","."].indexOf(n)!=-1?!0:w2utils.isFloat(n);case"money":return t&&["-",".","$","€","£","¥"].indexOf(n)!=-1?!0:w2utils.isMoney(n);case"hex":return w2utils.isHex(n);case"alphanumeric":return w2utils.isAlphaNumeric(n)}return!0}break;case"date":r=this;o={format:w2utils.settings.date_format,start:"",end:"",blocked:{},colored:{}};i=n.extend({},o,i);n(this).css({transition:"none","-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none","-o-transition":"none"}).data("options",i).on("focus",function(){var e=parseFloat(n(r).offset().top)+parseFloat(r.offsetHeight),t=parseFloat(n(r).offset().left),u,f;clearInterval(n(r).data("mtimer"));n("#global_calendar_div").remove();n("body").append('<div id="global_calendar_div" style="top: '+(e+parseInt(r.offsetHeight))+"px; left: "+t+'px;"  class="w2ui-reset w2ui-calendar"  onmousedown="\t\tif (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true; \t\tif (event.preventDefault) event.preventDefault(); else return false;"><\/div>');n("#global_calendar_div").html(n().w2field("calendar_get",r.value,i)).css({left:t+"px",top:e+"px"}).data("el",r).show();u=n(window).width()+n(document).scrollLeft()-1;t+n("#global_calendar_div").width()>u&&n("#global_calendar_div").css("left",u-n("#global_calendar_div").width()+"px");f=setInterval(function(){var i=n(window).width()+n(document).scrollLeft()-1,t=n(r).offset().left;if(t+n("#global_calendar_div").width()>i&&(t=i-n("#global_calendar_div").width()),n("#global_calendar_div").data("position")!=n(r).offset().left+"x"+(n(r).offset().top+r.offsetHeight)&&n("#global_calendar_div").css({"-webkit-transition":".2s",left:t+"px",top:n(r).offset().top+r.offsetHeight+"px"}).data("position",n(r).offset().left+"x"+(n(r).offset().top+r.offsetHeight)),n(r).length==0||n(r).offset().left==0&&n(r).offset().top==0){clearInterval(f);n("#global_calendar_div").remove();return}},100);n(r).data("mtimer",f)}).on("blur",function(){n(r).val(n.trim(n(r).val()));n.trim(n(r).val())==""||w2utils.isDate(n(r).val(),i.format)||n(this).w2tag(w2utils.lang("Not a valid date")+": "+i.format);clearInterval(n(r).data("mtimer"));n("#global_calendar_div").remove()}).on("keypress",function(){var t=this;setTimeout(function(){n("#global_calendar_div").html(n().w2field("calendar_get",t.value,i))},10)});setTimeout(function(){w2utils.isInt(r.value)&&(r.value=w2utils.formatDate(r.value,i.format))},1);break;case"time":break;case"datetime":break;case"color":r=this;o={prefix:"#",suffix:'<div style="margin-top: 1px; height: 12px; width: 12px;"><\/div>'};i=n.extend({},o,i);n(this).attr("maxlength",6).on("focus",function(){var f=parseFloat(n(r).offset().top)+parseFloat(r.offsetHeight),t=parseFloat(n(r).offset().left),i,u;clearInterval(n(r).data("mtimer"));n("#global_color_div").remove();n("body").append('<div id="global_color_div" style="top: '+(f+parseInt(r.offsetHeight))+"px; left: "+t+'px;"  class="w2ui-reset w2ui-calendar"  onmousedown="\t\tif (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true; \t\tif (event.preventDefault) event.preventDefault(); else return false;"><\/div>');n("#global_color_div").html(n().w2field("getColorHTML",r.value)).css({left:t+"px",top:f+"px"}).data("el",r).show();i=n(window).width()+n(document).scrollLeft()-1;t+n("#global_color_div").width()>i&&n("#global_color_div").css("left",i-n("#global_color_div").width()+"px");u=setInterval(function(){var i=n(window).width()+n(document).scrollLeft()-1,t=n(r).offset().left;if(t+n("#global_color_div").width()>i&&(t=i-n("#global_color_div").width()),n("#global_color_div").data("position")!=n(r).offset().left+"x"+(n(r).offset().top+r.offsetHeight)&&n("#global_color_div").css({"-webkit-transition":".2s",left:t+"px",top:n(r).offset().top+r.offsetHeight+"px"}).data("position",n(r).offset().left+"x"+(n(r).offset().top+r.offsetHeight)),n(r).length==0||n(r).offset().left==0&&n(r).offset().top==0){clearInterval(u);n("#global_color_div").remove();return}},100);n(r).data("mtimer",u)}).on("click",function(){n(this).trigger("focus")}).on("blur",function(){n(r).val(n.trim(n(r).val()));clearInterval(n(r).data("mtimer"));n("#global_color_div").remove()}).on("keydown",function(t){if(t.keyCode==86&&(t.ctrlKey||t.metaKey)){var i=this;n(this).prop("maxlength",7);setTimeout(function(){var t=n(i).val();t.substr(0,1)=="#"&&(t=t.substr(1));w2utils.isHex(t)||(t="");n(i).val(t).prop("maxlength",6).change()},20)}}).on("keyup",function(t){t.keyCode==86&&(t.ctrlKey||t.metaKey)&&n(this).prop("maxlength",6)}).on("keypress",function(t){t.keyCode==13&&n(this).change();var i=String.fromCharCode(t.charCode);if(!w2utils.isHex(i,!0))return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1}).on("change",function(){var t="#"+n(this).val();n(this).val().length!=6&&n(this).val().length!=3&&(t="");n(this).next().find("div").css("background-color",t)});if(i.prefix!=""){n(this).before('<div class="w2ui-field-helper">'+i.prefix+"<\/div>");f=n(this).prev();f.css({color:n(this).css("color"),"font-family":n(this).css("font-family"),"font-size":n(this).css("font-size"),"padding-top":n(this).css("padding-top"),"padding-bottom":n(this).css("padding-bottom"),"padding-left":n(this).css("padding-left"),"padding-right":0,"margin-top":parseInt(n(this).css("margin-top"))+1+"px","margin-bottom":parseInt(n(this).css("margin-bottom"))+1+"px","margin-left":0,"margin-right":0}).on("click",function(){n(this).next().focus()});n(this).css("padding-left",f.width()+parseInt(n(this).css("padding-left"))+2+"px")}if(i.suffix!=""){n(this).after('<div class="w2ui-field-helper">'+i.suffix+"<\/div>");f=n(this).next();f.css({color:n(this).css("color"),"font-family":n(this).css("font-family"),"font-size":n(this).css("font-size"),"padding-top":n(this).css("padding-top"),"padding-bottom":n(this).css("padding-bottom"),"padding-left":"3px","padding-right":n(this).css("padding-right"),"margin-top":parseInt(n(this).css("margin-top"))+1+"px","margin-bottom":parseInt(n(this).css("margin-bottom"))+1+"px"}).on("click",function(){n(this).prev().focus()});f.css("margin-left","-"+(f.width()+parseInt(n(this).css("padding-right"))+4)+"px");s=f.width()+parseInt(n(this).css("padding-right"))+4;n(this).css("padding-right",s+"px");f.find("div").css("background-color","#"+n(r).val())}break;case"select":case"list":if(this.tagName!="SELECT"){console.log("ERROR: You can only apply $().w2field('list') to a SELECT element");return}var o={url:"",items:[],value:null,showNone:!0},r=this,u=n.extend({},o,i);n(r).data("settings",u);r.refresh=function(){var i=n(r).data("settings"),e="",u=t.cleanItems(i.items),f;i.showNone&&(e='<option value="">- '+w2utils.lang("none")+" -<\/option>");for(f in u)i.showNone||i.value!=null||(i.value=u[f].id),e+='<option value="'+u[f].id+'">'+u[f].text+"<\/option>";n(r).html(e);n(r).val(i.value);n(r).val()!=i.value&&n(r).change()};u.url!=""?n.ajax({type:"GET",dataType:"text",url:u.url,complete:function(i,u){if(u=="success"){var e=n.parseJSON(i.responseText),f=n(r).data("settings");f.items=t.cleanItems(e.items);n(r).data("settings",f);r.refresh()}}}):r.refresh();break;case"enum":if(this.tagName!="INPUT"){console.log("ERROR: You can only apply $().w2field('enum') to an INPUT element");return}var o={url:"",items:[],selected:[],max:0,maxHeight:172,showAll:!1,match:"begins with",render:null,maxCache:500,onShow:null,onHide:null,onAdd:null,onRemove:null,onItemOver:null,onItemOut:null,onItemClick:null},r=this,u=n.extend({},o,i);u.items=t.cleanItems(u.items);u.selected=t.cleanItems(u.selected);n(this).data("selected",u.selected);n(this).css({padding:"0px","border-color":"transparent","background-color":"transparent",outline:"none"});this.add=function(t){var i,r,u;n(this).attr("readonly")||(i=n(this).data("selected"),r=n(this).data("settings"),typeof r.onAdd!="function"||(u=r.onAdd(t,r),u!==!1))&&(n.isArray(i)||(i=[]),r.max!=0&&r.max<=i.length&&i.splice(i.length-1,1),i.push(t),n(this).data("last_del",null),n(this).trigger("change"))};this.remove=function(i){var r=n(this).data("settings"),u;(typeof r.onRemove!="function"||(u=r.onRemove(i,r),u!==!1))&&(n(this).attr("readonly")||(n(this).data("selected").splice(i,1),n(this).parent().find("[title=Remove][index="+i+"]").remove(),this.refresh(),t.list_render.call(this),n(this).trigger("change")))};this.show=function(){var i,u,f;if(!n(this).attr("readonly")){if(i=n(this).data("settings"),n("#w2ui-global-items").length==0)w2ui_hide_items_flyout(),n("body").append('<div id="w2ui-global-items" class="w2ui-reset w2ui-items"><\/div>');else return;u=n("#w2ui-global-items");u.css({display:"block",left:n(r).offset().left+"px",top:n(r).offset().top+r.offsetHeight+3+"px"}).width(w2utils.getSize(r,"width")).data("position",n(r).offset().left+"x"+(n(r).offset().top+r.offsetHeight)).data("hide",this.hide.bind(this));u.on("mouseenter",function(){window.w2uiIsflyout=!1});u.on("mouseleave",function(){window.w2uiIsflyout=!0});t.list_render.call(r);f=function(){var i=n("#w2ui-global-items");if(n(r).length==0||n(r).offset().left==0&&n(r).offset().top==0){clearInterval(n(r).data("mtimer"));hide();return}i.data("position")!=n(r).offset().left+"x"+(n(r).offset().top+r.offsetHeight)&&(i.css({"-webkit-transition":".2s",left:n(r).offset().left+"px",top:n(r).offset().top+r.offsetHeight+3+"px"}).data("position",n(r).offset().left+"x"+(n(r).offset().top+r.offsetHeight)),setTimeout(function(){t.list_render.call(r,n(r).data("last_search"))},200));i.length>0&&n(r).data("mtimer",setTimeout(f,100))};n(r).data("mtimer",setTimeout(f,100));typeof i.onShow=="function"&&i.onShow.call(this,i)}};this.hide=function(){var t=n(this).data("settings");clearTimeout(n(r).data("mtimer"));n("#w2ui-global-items").remove();typeof t.onHide=="function"&&t.onHide.call(this,t)};this.refresh=function(){var i=this,r,t;n(n(this).data("div")).remove();var o="margin-top: "+n(this).css("margin-top")+"; margin-bottom: "+n(this).css("margin-bottom")+"; margin-left: "+n(this).css("margin-left")+"; margin-right: "+n(this).css("margin-right")+"; width: "+(w2utils.getSize(this,"width")-parseInt(n(this).css("margin-left"))-parseInt(n(this).css("margin-right")))+"px; ",f='<div class="w2ui-list" style="'+o+';"><div style="padding: 0px; margin: 0px; display: inline-block"><ul>',e=n(this).data("selected");for(r in e)f+='<li style="'+(n(this).data("last_del")==r?"opacity: 0.5":"")+'">\t<div title="'+w2utils.lang("Remove")+'" index="'+r+'">&nbsp;&nbsp;<\/div>'+e[r].text+"<\/li>";f+='<li style="padding-left: 0px; padding-right: 0px" class="nomouse">\t<input type="text" '+(n(this).attr("readonly")?"readonly":"")+' style="background-color: transparent"><\/li><\/ul><\/div><\/div>';n(this).before(f);t=n(this).prev()[0];n(this).data("div",t);n(t).find("li").data("mouse","out").on("click",function(t){if(!n(t.target).hasClass("nomouse")){if(t.target.title==w2utils.lang("Remove")){i.remove(n(t.target).attr("index"));return}t.stopPropagation();typeof u.onItemClick=="function"&&u.onItemClick.call(this,u)}}).on("mouseover",function(t){var i=t.target;(i.tagName!="LI"&&(i=i.parentNode),n(i).hasClass("nomouse"))||(n(i).data("mouse")=="out"&&typeof u.onItemOver=="function"&&u.onItemOver.call(this,u),n(i).data("mouse","over"))}).on("mouseout",function(t){var i=t.target;(i.tagName!="LI"&&(i=i.parentNode),n(i).hasClass("nomouse"))||(n(i).data("mouse","leaving"),setTimeout(function(){n(i).data("mouse")=="leaving"&&(n(i).data("mouse","out"),typeof u.onItemOut=="function"&&u.onItemOut.call(this,u))},0))});n(t).on("click",function(){n(this).find("input").focus()}).find("input").on("focus",function(r){n(t).css({outline:"auto 5px -webkit-focus-ring-color","outline-offset":"-2px"});i.show();r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}).on("blur",function(r){window.w2uiIsflyout&&(n(t).css("outline","none"),i.hide(),r.stopPropagation?r.stopPropagation():r.cancelBubble=!0)});i.resize()};this.resize=function(){var r=n(this).data("settings"),i,t;r&&(i=n(this).prev(),t=n(i).find(">div").height(),t<23&&(t=23),t>r.maxHeight&&(t=r.maxHeight),n(i).height(t+(t%23==0?0:23-t%23)),i.length>0&&(i[0].scrollTop=1e3),n(this).height(t))};n(this).data("settings",u).attr("tabindex",-1);r.refresh();break;case"upload":if(this.tagName!="INPUT"){console.log("ERROR: You can only apply $().w2field('upload') to an INPUT element");return}var o={url:"",base64:!0,hint:w2utils.lang("Attach files by dragging and dropping or Click to Select"),max:0,maxSize:0,maxFileSize:0,onAdd:null,onRemove:null,onItemClick:null,onItemDblClick:null,onItemOver:null,onItemOut:null,onProgress:null,onComplete:null},r=this,u=n.extend({},o,i);u.base64===!0&&(u.maxSize==0&&(u.maxSize=20971520),u.maxFileSize==0&&(u.maxFileSize=20971520));c=u.selected;delete u.selected;n.isArray(c)||(c=[]);n(this).data("selected",c).data("settings",u).attr("tabindex",-1);t.upload_init.call(this);this.refresh=function(){var e=this,i=n(this).data("div"),r=n(this).data("settings"),h=n(this).data("selected"),c,t,s,l,o,u,f;n(i).find("li").remove();n(i).find("> span:first-child").css("line-height",n(i).height()-w2utils.getSize(i,"+height")-8+"px");for(c in h){t=h[c];s=n(i).find(".file-list li").length;n(i).find("> span:first-child").remove();n(i).find(".file-list").append('<li id="file-'+s+'">\t<div class="file-delete" onmouseover="event.stopPropagation();">&nbsp;&nbsp;<\/div>\t<span class="file-name">'+t.name+'<\/span>\t<span class="file-size"> - '+w2utils.size(t.size)+"<\/span><\/li>");l=n(i).find(".file-list #file-"+s);o="";/image/i.test(t.type)&&(o='<div style="padding: 2px;">\t<img src="##FILE##" style="max-width: 300px;" \t\tonload="var w = $(this).width(); var h = $(this).height(); \t\t\tif (w < 300 & h < 300) return; \t\t\tif (w >= h && w > 300) $(this).width(300);\t\t\tif (w < h && h > 300) $(this).height(300);"\t\tonerror="this.style.display = \'none\'"\t><\/div>');u='style="padding: 3px; text-align: right; color: #777;"';f='style="padding: 3px"';o+='<div style="padding: 5px;">\t<table cellpadding="2">\t<tr><td '+u+">Name:<\/td><td "+f+">"+t.name+"<\/td><\/tr>\t<tr><td "+u+">Size:<\/td><td "+f+">"+w2utils.size(t.size)+"<\/td><\/tr>\t<tr><td "+u+">Type:<\/td><td "+f+'>\t\t<span style="width: 200px; display: block-inline; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">'+t.type+"<\/span>\t<\/td><\/tr>\t<tr><td "+u+">Modified:<\/td><td "+f+">"+w2utils.date(t.modified)+"<\/td><\/tr>\t<\/table><\/div>";l.data("file",t).on("click",function(t){if(typeof r.onItemClick=="function"){var i=r.onItemClick.call(e,n(this).data("file"));if(i===!1)return}n(t.target).hasClass("file-delete")||t.stopPropagation()}).on("dblclick",function(t){if(typeof r.onItemDblClick=="function"){var i=r.onItemDblClick.call(e,n(this).data("file"));if(i===!1)return}t.stopPropagation();document.selection?document.selection.empty():document.defaultView.getSelection().removeAllRanges()}).on("mouseover",function(){var i,t;(typeof r.onItemOver!="function"||(i=r.onItemOver.call(e,n(this).data("file")),i!==!1))&&(t=n(this).data("file"),n(this).w2overlay(o.replace("##FILE##",t.content?"data:"+t.type+";base64,"+t.content:""),{top:-4}))}).on("mouseout",function(){if(typeof r.onItemOut=="function"){var t=r.onItemOut.call(e,n(this).data("file"));if(t===!1)return}n(this).w2overlay()})}};this.refresh();break;case"slider":break;default:console.log('ERROR: w2field does not recognize "'+i.type+'" field type.')}})},addType:function(n,i){t.customTypes[String(n).toLowerCase()]=i},cleanItems:function(t){var f=[];for(var e in t){var r="",u="",i=t[e];if(i!=null){if(n.isPlainObject(t))r=e,u=i;else if(typeof i=="object"&&(typeof i.id!="undefined"&&(r=i.id),typeof i.value!="undefined"&&(r=i.value),typeof i.txt!="undefined"&&(u=i.txt),typeof i.text!="undefined"&&(u=i.text)),typeof i=="string"){if(String(i)=="")continue;r=i;u=i;i={}}w2utils.isInt(r)&&(r=parseInt(r));w2utils.isFloat(r)&&(r=parseFloat(r));f.push(n.extend({},i,{id:r,text:u}))}}return f},upload_init:function(){var i=this,o=n(this).data("settings"),u=n(i).prev(),f,e,r;u.length>0&&u[0].tagName=="DIV"&&u.hasClass("w2ui-upload")&&u.remove();f="margin-top: "+n(i).css("margin-top")+"; margin-bottom: "+n(i).css("margin-bottom")+"; margin-left: "+n(i).css("margin-left")+"; margin-right: "+n(i).css("margin-right")+"; width: "+(w2utils.getSize(i,"width")-parseInt(n(i).css("margin-left"))-parseInt(n(i).css("margin-right")))+"px; height: "+(w2utils.getSize(i,"height")-parseInt(n(i).css("margin-top"))-parseInt(n(i).css("margin-bottom")))+"px; ";e='<div style="'+f+'" class="w2ui-upload">\t<span>'+o.hint+'<\/span>\t<ul class="file-list"><\/ul>\t<input class="file-input" type="file" name="attachment" multiple style="display: none"><\/div>';n(i).css({display1:"none","border-color":"transparent"}).before(e);n(i).data("div",n(i).prev()[0]);r=n(i).data("div");n(r).find(".file-input").off("change").on("change",function(){if(typeof this.files!="undefined")for(var n=0,r=this.files.length;n<r;n++)t.upload_add.call(i,this.files[n])});n(r).off("click").on("click",function(u){var s;if(n(r).w2tag(),u.target.tagName!="LI"&&!n(u.target).hasClass("file-size")){if(n(u.target).hasClass("file-delete")){t.upload_remove.call(i,u.target.parentNode);return}if(u.target.tagName!="INPUT"){var f=n(i).data("settings"),o=n(i).data("selected"),e=0;for(s in o)e++;(e<f.max||f.max==0)&&n(r).find(".file-input").click()}}}).off("dragenter").on("dragenter",function(){n(r).addClass("dragover")}).off("dragleave").on("dragleave",function(){n(r).removeClass("dragover")}).off("drop").on("drop",function(u){var e,f,o;for(n(r).removeClass("dragover"),e=u.originalEvent.dataTransfer.files,f=0,o=e.length;f<o;f++)t.upload_add.call(i,e[f]);u.preventDefault();u.stopPropagation()}).off("dragover").on("dragover",function(n){n.preventDefault();n.stopPropagation()})},upload_add:function(t){var u=this,e=n(u).data("div"),i=n(u).data("settings"),o=n(u).data("selected"),f={name:t.name,type:t.type,modified:t.lastModifiedDate,size:t.size,content:null},h=0,c=0,l,r,a,s;for(l in o)h+=o[l].size,c++;if(i.maxFileSize!=0&&f.size>i.maxFileSize){r="Maximum file size is "+w2utils.size(i.maxFileSize);n(e).w2tag(r);console.log("ERROR: "+r);return}if(i.maxSize!=0&&h+f.size>i.maxSize){r="Maximum total size is "+w2utils.size(i.maxFileSize);n(e).w2tag(r);console.log("ERROR: "+r);return}if(i.max!=0&&c>=i.max){r="Maximum number of files is "+i.max;n(e).w2tag(r);console.log("ERROR: "+r);return}(typeof i.onAdd!="function"||(a=i.onAdd.call(u,f),a!==!1))&&(o.push(f),typeof FileReader!="undefined"&&i.base64===!0?(s=new FileReader,s.onload=function(){return function(t){var i=t.target.result,r=i.indexOf(",");f.content=i.substr(r+1);u.refresh();n(u).trigger("change")}}(),s.readAsDataURL(t)):(u.refresh(),n(u).trigger("change")))},upload_remove:function(t){var i=this,s=n(i).data("div"),f=n(i).data("settings"),u=n(i).data("selected"),e=n(t).data("file"),o,r;if(typeof f.onRemove=="function"&&(o=f.onRemove.call(i,e),o===!1))return!1;for(r=u.length-1;r>=0;r--)u[r].name==e.name&&u[r].size==e.size&&u.splice(r,1);n(t).fadeOut("fast");setTimeout(function(){n(t).remove();u.length==0&&n(s).prepend("<span>"+f.hint+"<\/span>");i.refresh();n(i).trigger("change")},300)},list_render:function(i){var r=this,f=n("#w2ui-global-items"),u=n(this).data("settings"),o=u.items,h=n(this).data("selected"),b,c,y,e,a,v,g,w;if(f.length!=0){typeof i=="undefined"&&(b="",b+='<div class="w2ui-items-list"><\/div>',f.html(b),i="");n(this).data("last_search",i);(typeof n(r).data("last_index")=="undefined"||n(r).data("last_index")==null)&&n(r).data("last_index",0);typeof u.last_total=="undefined"&&(u.last_total=-1);typeof u.last_search_len=="undefined"&&(u.last_search_len=0);typeof u.last_search_match=="undefined"&&(u.last_search_match=-1);u.url!=""&&(o.length==0&&u.last_total!=0||i.length>u.last_search_len&&u.last_total>u.maxCache||i.length<u.last_search_match&&i.length!=u.last_search_len)&&(c=!1,u.last_total<u.maxCache&&(c=!0),n.ajax({type:"GET",dataType:"text",url:u.url,data:{search:i,max:u.maxCache},complete:function(f,e){if(u.last_total=0,e=="success"){var o=n.parseJSON(f.responseText);c==!1&&o.total<u.maxCache&&(u.last_search_match=i.length);u.last_search_len=i.length;u.last_total=o.total;u.items=o.items;t.list_render.call(r,i)}}}));var s=0,l="<ul>",d=[];for(e in h)d.push(w2utils.isInt(h[e].id)?parseInt(h[e].id):String(h[e].id));y="";for(e in o)if(a=o[e].id,v=o[e].text,n.inArray(w2utils.isInt(a)?parseInt(a):String(a),d)==-1||u.showAll===!0){var p=String(i).toLowerCase(),k=v.toLowerCase(),c=p.length<=k.length&&k.substr(0,p.length)==p;u.match.toLowerCase()=="contains"&&k.indexOf(p)!=-1&&(c=!0);c&&(typeof u.render=="function"&&(v=u.render(o[e],h)),v!==!1&&(typeof o[e].group!="undefined"&&o[e].group!=y&&(y=o[e].group,l+='<li class="w2ui-item-group" onmousedown="event.preventDefault()">'+y+"<\/li>"),l+='\n<li index="'+e+'" value="'+a+"\"   onmouseover=\"$(this).parent().find('li').removeClass('selected'); $(this).addClass('selected'); \"\tclass=\""+(s%2?"w2ui-item-even":"w2ui-item-odd")+(s==n(r).data("last_index")?" selected":"")+'">'+v+"<\/li>",s==n(r).data("last_index")&&n(r).data("last_item",o[e]),s++))}l+="<\/ul>";s==0&&(l='<div class="w2ui-empty-list">'+w2utils.lang("No items found")+"<\/div>",g=!0);f.find(".w2ui-items-list").html(l);n(this).data("last_max",s-1);f.find("li.selected").length>0&&f.find("li.selected")[0].scrollIntoView(!1);f.css({"-webkit-transition":"0s",height:"auto"});w=parseInt(n(document).height())>parseInt(n(window).height())?parseInt(n(window).height())-parseInt(f.offset().top)-8:parseInt(n(document).height())-parseInt(f.offset().top)-8;n(f).find(".w2ui-items-list").css({height:"auto",overflow:"visible"});parseInt(f.height())>w?(f.css({height:w-5+"px",overflow:"show"}),n(f).find(".w2ui-items-list").css({height:w-15+"px",overflow:"auto"})):(f.css({height:"auto",overflow:"show"}),n(f).find(".w2ui-items-list").css({height:"auto",overflow:"auto"}));n(f).off("mousedown").on("mousedown",function(i){var f=i.target,e,o;if(f.tagName!="LI"&&(f=n(f).parents("li")),e=n(f).attr("index"),e){if(o=u.items[e],typeof e=="undefined")if(i.preventDefault)i.preventDefault();else return!1;r.add(o);n(r).data("last_index",0);r.refresh();t.list_render.call(r,"")}});n(r).prev().find("li > input").val(i).css("max-width",n(f).width()-25+"px").width((i.length+2)*6+"px").focus().on("click",function(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}).off("keyup").on("keyup",function(i){var u=this;setTimeout(function(){var f=n(r).data("last_index"),e;switch(i.keyCode){case 38:f--;f<0&&(f=0);n(r).data("last_index",f);i.preventDefault&&i.preventDefault();break;case 40:f++;f>n(r).data("last_max")&&(f=n(r).data("last_max"));n(r).data("last_index",f);i.preventDefault&&i.preventDefault();break;case 13:if(typeof n(r).data("last_item")=="undefined"||n(r).data("last_item")==null||g===!0)break;e=n(r).data("selected");r.add(n(r).data("last_item"));f>n(r).data("last_max")-1&&(f=n(r).data("last_max")-1);n(r).data("last_index",f);n(r).data("last_item",null);n(u).val("");r.refresh();i.preventDefault&&i.preventDefault();break;case 8:String(u.value)==""&&(typeof n(r).data("last_del")=="undefined"||n(r).data("last_del")==null?(e=n(r).data("selected"),n.isArray(e)||(e=[]),n(r).data("last_del",e.length-1),r.refresh()):(e=n(r).data("selected"),r.remove(e.length-1)));break;default:n(r).data("last_index",0);n(r).data("last_del",null)}r.resize();i.keyCode==8&&String(u.value)==""||(n(r).prev().find("li").css("opacity","1"),n(r).data("last_del",null));n.inArray(i.keyCode,[16,91,37,39])==-1&&t.list_render.call(r,u.value)},10)})}},calendar_get:function(t,i){var e=new Date,o=Number(e.getMonth())+1+"/"+e.getDate()+"/"+(String(e.getYear()).length>3?e.getYear():e.getYear()+1900);(String(t)==""||String(t)=="undefined")&&(t=w2utils.formatDate(o,i.format));w2utils.isDate(t,i.format)||(t=w2utils.formatDate(o,i.format));var r=t.replace(/-/g,"/").replace(/\./g,"/").toLowerCase().split("/"),f=i.format.replace(/-/g,"/").replace(/\./g,"/").toLowerCase(),u=new Date;return f=="mm/dd/yyyy"&&(u=new Date(r[0]+"/"+r[1]+"/"+r[2])),f=="m/d/yyyy"&&(u=new Date(r[0]+"/"+r[1]+"/"+r[2])),f=="dd/mm/yyyy"&&(u=new Date(r[1]+"/"+r[0]+"/"+r[2])),f=="d/m/yyyy"&&(u=new Date(r[1]+"/"+r[0]+"/"+r[2])),f=="yyyy/dd/mm"&&(u=new Date(r[2]+"/"+r[1]+"/"+r[0])),f=="yyyy/d/m"&&(u=new Date(r[2]+"/"+r[1]+"/"+r[0])),f=="yyyy/mm/dd"&&(u=new Date(r[1]+"/"+r[2]+"/"+r[0])),f=="yyyy/m/d"&&(u=new Date(r[1]+"/"+r[2]+"/"+r[0])),f=="mm/dd/yy"&&(u=new Date(r[0]+"/"+r[1]+"/"+(parseInt(r[2])+1900))),f=="m/d/yy"&&(u=new Date(r[0]+"/"+r[1]+"/"+(parseInt(r[2])+1900))),f=="dd/mm/yy"&&(u=new Date(r[1]+"/"+r[0]+"/"+(parseInt(r[2])+1900))),f=="d/m/yy"&&(u=new Date(r[1]+"/"+r[0]+"/"+(parseInt(r[2])+1900))),f=="yy/dd/mm"&&(u=new Date(r[2]+"/"+r[1]+"/"+(parseInt(r[0])+1900))),f=="yy/d/m"&&(u=new Date(r[2]+"/"+r[1]+"/"+(parseInt(r[0])+1900))),f=="yy/mm/dd"&&(u=new Date(r[1]+"/"+r[2]+"/"+(parseInt(r[0])+1900))),f=="yy/m/d"&&(u=new Date(r[1]+"/"+r[2]+"/"+(parseInt(r[0])+1900))),'<table cellpadding="0" cellspacing="0"><tr><td>'+n().w2field("calendar_month",u.getMonth()+1,u.getFullYear(),i)+"<\/td><\/tr><\/table>"},calendar_next:function(t){var f=String(t).split("/"),i=f[0],r=f[1],u;parseInt(i)<12?i=parseInt(i)+1:(i=1,r=parseInt(r)+1);u=n(n("#global_calendar_div.w2ui-calendar").data("el")).data("options");n("#global_calendar_div.w2ui-calendar").html(n().w2field("calendar_get",w2utils.formatDate(i+"/1/"+r,u.format),u))},calendar_previous:function(t){var f=String(t).split("/"),i=f[0],r=f[1],u;parseInt(i)>1?i=parseInt(i)-1:(i=12,r=parseInt(r)-1);u=n(n("#global_calendar_div.w2ui-calendar").data("el")).data("options");n("#global_calendar_div.w2ui-calendar").html(n().w2field("calendar_get",w2utils.formatDate(i+"/1/"+r,u.format),u))},calendar_month:function(t,i,r){var u=new Date,tt=w2utils.settings.fullmonths,et=w2utils.settings.fulldays,p=["31","28","31","30","31","30","31","31","30","31","30","31"],it=Number(u.getMonth())+1+"/"+u.getDate()+"/"+(String(u.getYear()).length>3?u.getYear():u.getYear()+1900),c,k,e,s,f,v,o,h,l;i=Number(i);t=Number(t);(i===null||i==="")&&(i=String(u.getYear()).length>3?u.getYear():u.getYear()+1900);(t===null||t==="")&&(t=Number(u.getMonth())+1);t>12&&(t=t-12,i++);(t<1||t==0)&&(t=t+12,i--);p[1]=i/4==Math.floor(i/4)?"29":"28";i==null&&(i=u.getYear());t==null&&(t=u.getMonth()-1);u=new Date;u.setDate(1);u.setMonth(t-1);u.setYear(i);var a=u.getDay(),w=w2utils.settings.shortdays,b="";for(c=0,k=w.length;c<k;c++)b+="<td>"+w[c]+"<\/td>";for(e='<div class="w2ui-calendar-title" onclick="event.stopPropagation()">\t<div class="w2ui-calendar-previous" onclick="$().w2field(\'calendar_previous\', \''+t+"/"+i+"')\"> <- <\/div>\t<div class=\"w2ui-calendar-next\" onclick=\"$().w2field('calendar_next', '"+t+"/"+i+"')\"> -> <\/div> "+tt[t-1]+", "+i+'<\/div><table class="w2ui-calendar-days" onclick="event.stopPropagation()" cellspacing="0">\t<tr class="w2ui-day-title">'+b+"<\/tr>\t<tr>",s=1,f=1;f<43;f++){if(a==0&&f==1){for(v=0;v<6;v++)e+='<td class="w2ui-day-empty">&nbsp;<\/td>';f+=6}else if(f<a||s>p[t-1]){e+='<td class="w2ui-day-empty">&nbsp;<\/td>';f%7==0&&(e+="<\/tr><tr>");continue}o=t+"/"+s+"/"+i;h="";f%7==6&&(h="w2ui-saturday");f%7==0&&(h="w2ui-sunday");o==it&&(h+=" w2ui-today");var rt=s,d="",g="",y="";if(r.colored&&r.colored[o]!=undefined&&(tmp=r.colored[o].split(":"),g="background-color: "+tmp[0]+";",d="color: "+tmp[1]+";"),l=!1,r.start||r.end){var ut=new Date(r.start),ft=new Date(r.end),nt=new Date(o);(nt<ut||nt>ft)&&(y=" w2ui-blocked-date",l=!0)}r.blocked&&n.inArray(o,r.blocked)!=-1&&(y=" w2ui-blocked-date",l=!0);e+='<td class="'+h+y+'" style="'+d+g+'" id="'+this.name+"_date_"+o+'" date="'+o+'"';l===!1&&(e+="onclick=\"var el = $('#global_calendar_div.w2ui-calendar').data('el'); \t$(el).val('"+w2utils.formatDate(o,r.format)+"').trigger('change').trigger('blur'); \t if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\t if (event.preventDefault) event.preventDefault(); else return false;\"");e+=">"+rt+"<\/td>";(f%7==0||a==0&&f==1)&&(e+="<\/tr><tr>");s++}return e+"<\/tr><\/table>"},getColorHTML:function(n){for(var i,r='<div class="w2ui-color"><table cellspacing="5">',u=[["000000","444444","666666","999999","CCCCCC","EEEEEE","F3F3F3","FFFFFF"],["FF011B","FF9838","FFFD59","01FD55","00FFFE","0424F3","9B24F4","FF21F5"],["F4CCCC","FCE5CD","FFF2CC","D9EAD3","D0E0E3","CFE2F3","D9D1E9","EAD1DC"],["EA9899","F9CB9C","FEE599","B6D7A8","A2C4C9","9FC5E8","B4A7D6","D5A6BD"],["E06666","F6B26B","FED966","93C47D","76A5AF","6FA8DC","8E7CC3","C27BA0"],["CC0814","E69138","F1C232","6AA84F","45818E","3D85C6","674EA7","A54D79"],["99050C","B45F17","BF901F","37761D","124F5C","0A5394","351C75","741B47"],["660205","783F0B","7F6011","274E12","0C343D","063762","20124D","4C1030"]],t=0;t<8;t++){for(r+="<tr>",i=0;i<8;i++)r+="<td>\t<div onclick=\"var el = $('#global_color_div').data('el');\t\t\t$(el).val($(this).attr('name')).change(); \t\t\t$('#global_color_div').hide()\" \t\tstyle=\"background-color: #"+u[t][i]+';" name="'+u[t][i]+'">\t\t'+(n==u[t][i]?"&#149;":"&nbsp;")+"\t<\/div><\/td>";r+="<\/tr>";t<2&&(r+='<tr><td style="height: 8px" colspan="8"><\/td><\/tr>')}return r+"<\/table><\/div>"}});w2obj.field=t}(jQuery),window.w2uiIsflyout=!1,String(navigator.userAgent).indexOf("MSIE")>=0||!!navigator.userAgent.match(/Trident.*rv\:11\./))$(document).on("click",w2ui_hide_items_flyout);